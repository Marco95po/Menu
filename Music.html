<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Music Live</title>
  <link rel="icon" href="https://i.postimg.cc/bNprg8kh/Screenshot-20250606-180521.jpg" type="image/x-icon">
  <link rel="shortcut icon" href="https://i.postimg.cc/bNprg8kh/Screenshot-20250606-180521.jpg" type="image/x-icon">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#ff5e01">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Music Live">
  <link rel="apple-touch-icon" href="https://i.postimg.cc/bNprg8kh/Screenshot-20250606-180521.jpg">
  
  <style>
    :root {
      --bg-gradient-start: #ff7301;
      --bg-gradient-end: #000000;
      --text-color: #ffffff;
      --header-bg: rgba(0, 0, 0, 0.8);
      --song-title-color: #ffa600;
      --artist-name-color: #aaa;
      --player-bg: rgba(0, 0, 0, 0.9);
      --player-text: rgb(255, 145, 0);
      --player-controls-bg: rgba(30, 30, 30, 0.9);
      --panel-bg: #282828;
      --panel-text: #ffffff;
      --search-bg: rgba(255, 255, 255, 0.1);
      --search-text: white;
      --scrollbar-thumb: #ff5e01;
      --scrollbar-track: #333;
    }

    .light-mode {
      --bg-gradient-start: #ffd700;
      --bg-gradient-end: #87cefa;
      --text-color: #333333;
      --header-bg: rgba(255, 255, 255, 0.9);
      --song-title-color: #ff6b00;
      --artist-name-color: #666;
      --player-bg: rgba(255, 255, 255, 0.95);
      --player-text: #ff6b00;
      --player-controls-bg: rgba(240, 240, 240, 0.9);
      --panel-bg: #f5f5f5;
      --panel-text: #333333;
      --search-bg: rgba(0, 0, 0, 0.1);
      --search-text: #333;
      --scrollbar-thumb: #ff8c00;
      --scrollbar-track: #ddd;
    }

    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(-45deg, var(--bg-gradient-start), var(--bg-gradient-end));
      background-size: 400% 400%;
      animation: gradientBG 15s ease infinite;
      color: var(--text-color);
      transition: background 0.5s ease, color 0.3s ease;
    }

    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background-color: var(--header-bg);
      z-index: 1000;
      padding: 10px 0;
      text-align: center;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: background-color 0.3s ease;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      max-width: 1200px;
      padding: 0 20px;
      box-sizing: border-box;
    }

    .theme-toggle {
      background: transparent;
      border: none;
      color: var(--text-color);
      font-size: 1.5rem;
      cursor: pointer;
      padding: 5px;
      margin-left: 10px;
      transition: transform 0.3s ease;
    }

    .theme-toggle:hover {
      transform: scale(1.1);
    }

    .Texp {
      color: #ffc401;
      margin: 0;
      font-size: 2rem;
      text-shadow: 0 0 5px #e6ff01, 0 0 10px #e6ff01, 0 0 15px #e6ff01;
      animation: brillo 1.5s ease-in-out infinite alternate;
      text-decoration: none;
      cursor: pointer;
    }

    @keyframes brillo {
      from {
        text-shadow: 0 0 5px #e6ff01, 0 0 10px #e6ff01;
      }
      to {
        text-shadow: 0 0 10px #e6ff01, 0 0 20px #e6ff01, 0 0 30px #e6ff01;
      }
    }

    .categories-container {
      margin-top: 140px;
      padding: 0;
    }

    .category {
      margin-bottom: 40px;
    }

    .category-title {
      font-size: 1.0rem;
      margin-bottom: 15px;
      color: var(--text-color);
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      animation: fadeIn 1.5s ease-in-out;
    }

    @keyframes fadeIn {
      from {
          opacity: 0;
          transform: translateY(-20px);
      }
      to {
          opacity: 1;
          transform: translateY(0);
      }
    }

    .category-icon {
      margin-right: 10px;
      color: #ff5e01;
    }

    .carousel {
      display: flex;
      overflow-x: auto;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
      padding: 10px 0;
      scrollbar-width: none;
    }

    .carousel::-webkit-scrollbar {
      display: none;
    }

    .song-item {
      flex: 0 0 auto;
      width: 160px;
      margin: 0 5px;
      transition: transform 0.3s;
      position: relative;
      opacity: 0;
      animation: fadeIn 0.5s forwards;
    }

    .song-item {
      perspective: 1000px;
    }

    .song-item img {
      width: 100%;
      height: auto;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      transform-style: preserve-3d;
      animation: subtleFloat 6s ease-in-out infinite;
      filter: brightness(0.98);
    }

    .song-item:hover img {
      transform: scale(1.05) rotateY(10deg);
      box-shadow: 0 8px 25px rgba(255, 94, 1, 0.5);
      filter: brightness(1.05);
      animation-play-state: paused;
    }

    @keyframes subtleFloat {
      0%, 100% { transform: translateY(0) rotateY(0); }
      25% { transform: translateY(-4px) rotateY(2deg); }
      50% { transform: translateY(0) rotateY(0); }
      75% { transform: translateY(-4px) rotateY(-2deg); }
    }

    .song-item img:hover {
      box-shadow: 0 8px 16px rgba(255, 94, 1, 0.4);
    }

    .song-info {
      padding: 8px 0;
    }

    .song-title {
      display: block;
      margin-top: 5px;
      color: var(--song-title-color);
      font-size: 10px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .artist-name {
      display: block;
      margin-top: 5px;
      color: var(--artist-name-color);
      font-size: 12px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .Nuevo {
      display: block;
      margin-top: 5px;
      color: #51ff01;
      font-size: 10px;
      font-weight: bold;
    }

    .favorite-btn {
      display: none; /* Ocultar bot√≥n de favoritos */
    }

    .favorite-count {
      display: none; /* Ocultar contador de favoritos */
    }

    .play-count {
      display: none; /* Ocultar contador de reproducciones */
    }

    .carousel-nav {
      display: flex;
      justify-content: flex-end;
      margin-right: 20px;
    }

    .nav-btn {
      background-color: rgba(255, 174, 0, 0.7);
      color: white;
      border: none;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      margin-left: 10px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }

    .nav-btn:hover {
      background-color: #ff5e01;
      transform: scale(1.1);
    }

    /* Floating Player Styles */
    #floatingPlayer {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: var(--player-bg);
      border: 2px solid #333;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      padding: 40px;
      z-index: 9999;
      text-align: center;
      width: 320px;
      transition: background-color 0.5s ease;
    }

    #floatingPlayer.minimized {
      width: 97%;
      height: 80px;
      padding: 10px;
      top: auto;
      bottom: 0;
      left: 0;
      transform: none;
      border-radius: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background-color: var(--header-bg);
    }

    #floatingPlayer.minimized img,
    #floatingPlayer.minimized #progressContainer,
    #floatingPlayer.minimized #timeContainer,
    #floatingPlayer.minimized #playlistPanel {
      display: none;
    }

    #floatingPlayer.minimized #info {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text-color);
      font-size: 14px;
      margin-left: 10px;
      flex: 1;
    }

    #floatingPlayer.minimized #controls {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      flex: 1;
    }

    #floatingPlayer.minimized #controls button {
      padding: 8px;
      background: #333;
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      margin: 0 5px;
      width: 35px;
      height: 35px;
    }

    #floatingPlayer img {
      width: 90%;
      height: auto;
      border-radius: 10px;
      margin-bottom: 12px;
      box-shadow: 0 4px 12px rgba(255, 145, 0, 0.5);
      position: relative;
    }

    .cover-container {
      position: relative;
      display: inline-block;
      width: 100%;
      text-align: center;
      margin: 20px 0;
    }

    .favorite-icon {
      position: absolute;
      top: 10px;
      left: 10px;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
    }

    .favorite-icon:hover {
      background-color: rgba(0, 0, 0, 0.9);
      transform: scale(1.1);
    }

    .favorite-icon.added {
      background-color: #ff5e01;
      color: rgb(253, 253, 253);
      animation: bounce 0.5s ease;
    }

    @keyframes bounce {
      0% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.3);
      }
      100% {
        transform: scale(1);
      }
    }

    #closeButton {
      position: absolute;
      top: 5px;
      right: 10px;
      background: #ff5e01;
      color: white;
      border: none;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      cursor: pointer;
      font-weight: bold;
    }

    #minimizeButton {
      position: absolute;
      top: 5px;
      right: 40px;
      background: #ff5e01;
      color: white;
      border: none;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      cursor: pointer;
      font-weight: bold;
    }

    #controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin-top: 20px;
      background: var(--player-controls-bg);
      padding: 20px;
      border-radius: 10px;
      width: 100%;
      box-sizing: border-box;
    }

    #controls button {
      background: transparent;
      color: white;
      border: none;
      padding: 12px;
      cursor: pointer;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      font-size: 24px;
      border-radius: 50%;
    }

    #playPauseButton {
      background: #000000 !important;
      color: white !important;
      border-radius: 50%;
      width: 60px !important;
      height: 60px !important;
      padding: 15px !important;
      margin: 0 15px !important;
      font-size: 28px;
    }

    #playPauseButton:hover {
      background: hsl(30, 1%, 40%) !important;
      transform: scale(1.1) !important;
    }

    #progressContainer {
      width: 100%;
      background: #444;
      height: 6px;
      border-radius: 3px;
      margin: 15px 0;
      cursor: pointer;
      position: relative;
    }

    #progressBar {
      height: 100%;
      background: #ffffff;
      border-radius: 3px;
      width: 0%;
      transition: width 0.1s linear;
    }

    #timeContainer {
      display: flex;
      justify-content: space-between;
      width: 100%;
      color: #ffffff;
      font-size: 12px;
      margin-bottom: 10px;
    }

    #volumeControl {
      display: flex;
      align-items: center;
      gap: 5px;
      margin-left: 15px;
    }

    #volumeControl input {
      width: 80px;
    }

    #floatingPlayer.minimized #controls {
      padding: 5px;
      background: transparent;
      width: auto;
    }

    #floatingPlayer.minimized #controls button {
      width: 40px;
      height: 40px;
      font-size: 18px;
    }

    #info {
      margin-bottom: 10px;
      color: var(--player-text);
      text-align: center;
      transition: color 0.3s ease;
    }

    #songTitle {
      font-size: 1.2rem;
      display: block;
      margin-bottom: 5px;
      transition: color 0.3s ease;
    }

    #artistName, #albumTitle {
      font-size: 0.9rem;
      color: var(--artist-name-color);
      transition: color 0.3s ease;
    }

    /* Playlist Panel Styles */
    #playlistPanel {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--panel-bg);
      color: var(--panel-text);
      border-radius: 10px;
      padding: 20px;
      width: 80%;
      max-width: 600px;
      max-height: 70vh;
      overflow-y: auto;
      z-index: 10000;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
    }

    #playlistPanel h2 {
      color: #ff5e01;
      margin-top: 0;
    }

    #playlistPanel input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: none;
      border-radius: 5px;
      background-color: #404040;
      color: var(--panel-text);
      font-size: 14px;
      outline: none;
    }

    #playlistPanel input[type="text"]::placeholder {
      color: #aaa;
    }

    .playlist-item {
      display: flex;
      align-items: center;
      padding: 10px;
      border-radius: 5px;
      transition: background-color 0.3s ease;
      cursor: pointer;
      margin-bottom: 5px;
    }

    .playlist-item:hover {
      background-color: rgba(255, 94, 1, 0.2);
    }

    .playlist-item.active {
      background-color: rgba(255, 94, 1, 0.4);
    }

    .playlist-item img {
      width: 50px;
      height: 50px;
      border-radius: 5px;
      margin-right: 15px;
      object-fit: cover;
    }

    .playlist-item-info {
      flex: 1;
    }

    .playlist-item-title {
      font-weight: bold;
      margin-bottom: 3px;
    }

    .playlist-item-artist {
      font-size: 12px;
      color: var(--artist-name-color);
    }

    .playlist-item-plays {
      font-size: 12px;
      color: #ff5e01;
    }

    /* Favorites Panel Styles */
    #favoritesPanel {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--panel-bg);
      border-radius: 10px;
      padding: 20px;
      width: 80%;
      max-width: 600px;
      max-height: 70vh;
      overflow-y: auto;
      z-index: 10000;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
    }

    #closeFavoritesButton {
      position: absolute;
      top: 10px;
      right: 10px;
      background: transparent;
      color: #ff5e01;
      border: none;
      font-size: 20px;
      cursor: pointer;
    }

    #favoritesPanel h2 {
      color: #ff5e01;
      margin-top: 0;
    }

    #favoritesSearchInput {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: none;
      border-radius: 5px;
      background-color: #404040;
      color: var(--panel-text);
      font-size: 14px;
      outline: none;
    }

    /* Search Bar Styles */
    #searchInput {
      padding: 10px 15px;
      margin-top: 10px;
      width: 80%;
      max-width: 500px;
      border-radius: 25px;
      border: 2px solid #ff5e01;
      font-size: 14px;
      outline: none;
      transition: all 0.3s ease;
      background-color: var(--search-bg);
      color: var(--search-text);
    }

    #searchInput:focus {
      border-color: #ff8c00;
      box-shadow: 0 0 10px rgba(255, 94, 1, 0.5);
      background-color: rgba(255, 255, 255, 0.2);
    }

    #searchInput::placeholder {
      color: #ccc;
    }

    /* Favorites Button Styles */
    .Favoritosbtn {
      background-color: #ffffff;
      color: rgb(0, 0, 0);
      border: none;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      animation: colorChange 8s infinite alternate;
    }

    @keyframes colorChange {
      0% {
          background-color: #ffffff;
      }
      25% {
          background-color: #ffcccb;
      }
      50% {
          background-color: #b5ead7;
      }
      75% {
          background-color: #c7ceea;
      }
      100% {
          background-color: #ffddac;
      }
    }

    .Favoritosbtn:hover {
      animation: none;
      background-color: #ffa600;
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
    }

    /* Audio Player (hidden) */
    #audioPlayer {
      width: 100%;
      margin-bottom: 15px;
      display: none;
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--scrollbar-thumb);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-track {
      background: var(--scrollbar-track);
    }

    /* Artist filter styles */
    .artist-filter {
      display: none !important;
    }

    .current-artist {
      text-align: center;
      margin-top: 10px;
      color: #ff5e01;
      font-size: 1.2rem;
      display: none;
    }

    #closePlaylistButton {
      position: absolute;
      top: 10px;
      right: 10px;
      background: transparent;
      color: #ff5e01;
      border: none;
      font-size: 24px;
      cursor: pointer;
      z-index: 100;
    }

    #closePlaylistButton:hover {
      color: #ff8c00;
      transform: scale(1.1);
    }

    #closePlaylistButton:focus {
      outline: none;
    }

    #trendingCategory .carousel img {
      border-radius: 50%;
      object-fit: cover;
      width: 100px;
      height: 100px;
      aspect-ratio: 1/1;
    }

    /* If they are divs with background-image */
    #trendingCategory .carousel .item {
      border-radius: 50%;
      background-size: cover;
      background-position: center;
      width: 100px;
      height: 100px;
    }

    .two-column-list {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      justify-items: center;
    }

    .two-column-list .item {
      flex: 1 1 calc(50% - 15px);
      box-sizing: border-box;
    }

    .two-column-list .item {
      width: calc(50% - 15px);
    }

    /* Search results mode styles */
    .search-results-container {
      margin-top: 140px;
      padding: 20px;
    }

    .search-results-title {
      color: var(--text-color);
      font-size: 1.5rem;
      margin-bottom: 20px;
      text-align: center;
    }

    .search-results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 15px;
    }

    .no-results {
      color: var(--artist-name-color);
      text-align: center;
      font-size: 1.2rem;
      margin-top: 50px;
    }

    /* Confirmation modal styles */
    .confirmation-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 10001;
      justify-content: center;
      align-items: center;
    }

    .confirmation-content {
      background-color: var(--panel-bg);
      padding: 20px;
      border-radius: 10px;
      max-width: 500px;
      width: 90%;
      text-align: center;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
    }

    .confirmation-content h3 {
      color: #ff5e01;
      margin-top: 0;
    }

    .confirmation-content p {
      color: var(--panel-text);
      margin-bottom: 20px;
    }

    .confirmation-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .confirmation-btn {
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
      border: none;
    }

    .confirmation-btn.yes {
      background-color: #ff5e01;
      color: white;
    }

    .confirmation-btn.no {
      background-color: #333;
      color: white;
    }

    .confirmation-btn:hover {
      transform: scale(1.05);
    }
    .cover-container {
    width: 100%;
    text-align: center;
    margin: 20px 0;
    }

    .vertical-cover {
    width: auto;
    height: 40vh;
    max-width: 90%;
    border-radius: 12px;
    object-fit: cover;
    object-position: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }
    /* Netflix-style video styles */
    .video-container {
        position: relative;
        width: 100%;
        max-width: 800px;
        margin: 20px auto;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
    }

    .netflix-style-video {
        width: 100%;
        display: block;
        background-color: #000;
    }

    .video-info {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
        padding: 20px;
        color: white;
    }

    .video-title {
        margin: 0 0 10px 0;
        font-size: 10px;
        text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
    }

    .video-actions {
        display: flex;
        gap: 10px;
    }

    .play-button, .info-button {
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        font-weight: bold;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .play-button {
        background-color: #e57e09;
        color: white;
    }

    .info-button {
        background-color: rgba(109, 109, 110, 0.7);
        color: white;
    }

    /* Video controls adjustments */
    video::-webkit-media-controls {
        display: none;
    }

    /* Optional: Hide native controls and create custom controls */
    .netflix-style-video {
        cursor: pointer;
    }
    .youtube-button {
    display: inline-block;
    background-color: #FF0000;
    color: white;
    padding: 10px 15px;
    border-radius: 4px;
    text-decoration: none;
    font-weight: bold;
    transition: background-color 0.3s;
    }

    .youtube-button:hover {
    background-color: #CC0000;
    }

    .youtube-button i {
    margin-right: 8px;
    }

    /* Artist profile styles */
    .artist-profile {
      display: none;
      margin-top: 140px;
      padding: 20px;
      text-align: center;
    }

    .artist-header {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 30px;
    }

    .artist-avatar {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #ff5e01;
      box-shadow: 0 8px 16px rgba(255, 94, 1, 0.3);
      margin-bottom: 15px;
    }

    .artist-name {
      display: block;
      margin-top: 5px;
      color: var(--artist-name-color);
      font-size: 10px; /* Changed from 12px to 10px */
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .artist-songs-title {
      font-size: 1.5rem;
      color: var(--text-color);
      margin-bottom: 20px;
      text-align: center;
      border-bottom: 2px solid #ff5e01;
      padding-bottom: 10px;
      display: inline-block;
    }

    .back-to-search {
      display: inline-block;
      margin-top: 20px;
      padding: 8px 16px;
      background-color: #ff5e01;
      color: white;
      border-radius: 20px;
      text-decoration: none;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .back-to-search:hover {
      background-color: #ff8c00;
      transform: translateY(-2px);
    }
    .artist-button {
      position: relative;
      padding: 10px 24px;
      background: linear-gradient(135deg, #e96e09, #5c471a);
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(29, 185, 84, 0.3);
      transition: all 0.3s ease;
      margin-top: 15px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .artist-button:hover {
      box-shadow: 0 6px 20px rgba(29, 185, 84, 0.4);
      transform: translateY(-2px);
    }

    .artist-button:active {
      transform: translateY(0);
    }

    .artist-button::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, rgba(255,255,255,0.3), rgba(255,255,255,0));
      opacity: 0;
      transition: opacity 0.3s;
    }

    .artist-button:hover::after {
      opacity: 1;
    }

    .listen-artist-btn {
      background-color: #ff5e01;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 25px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .listen-artist-btn:hover {
      background-color: #ff8c00;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }
    
    /* Followed artists section styles */
    .followed-artists-container {
      margin-top: 20px;
    }
    
    .followed-artist {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
      padding: 10px;
      border-radius: 8px;
      background-color: rgba(255, 94, 1, 0.1);
      transition: all 0.3s ease;
    }
    
    .followed-artist:hover {
      background-color: rgba(255, 94, 1, 0.2);
      transform: translateX(5px);
    }
    
    .followed-artist-avatar {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
      margin-right: 15px;
      border: 2px solid #ff5e01;
    }
    
    .followed-artist-info {
      flex: 1;
    }
    
    .followed-artist-name {
      font-weight: bold;
      color: var(--song-title-color);
      margin-bottom: 5px;
    }
    
    .followed-artist-songs {
      font-size: 12px;
      color: var(--artist-name-color);
    }
    
    .unfollow-btn {
      background-color: transparent;
      color: #ff5e01;
      border: 1px solid #ff5e01;
      border-radius: 20px;
      padding: 5px 10px;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .unfollow-btn:hover {
      background-color: #ff5e01;
      color: white;
    }
    
    /* Followed artists button styles */
    .followed-artists-btn {
      background-color: #1a1614;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 25px;
      cursor: pointer;
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 1000;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }
    
    .followed-artists-btn:hover {
      background-color: #ff8c00;
      transform: translateY(-3px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
    }
    
    /* Followed artists panel */
    #followedArtistsPanel {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--panel-bg);
      border-radius: 10px;
      padding: 20px;
      width: 80%;
      max-width: 600px;
      max-height: 70vh;
      overflow-y: auto;
      z-index: 10000;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
    }
    
    #closeFollowedArtistsButton {
      position: absolute;
      top: 10px;
      right: 10px;
      background: transparent;
      color: #ff5e01;
      border: none;
      font-size: 20px;
      cursor: pointer;
    }
    
    #followedArtistsPanel h2 {
      color: #ff5e01;
      margin-top: 0;
    }
    
    #followedArtistsList {
      margin-top: 20px;
    }
    
    .no-followed-artists {
      text-align: center;
      color: var(--artist-name-color);
      font-style: italic;
      padding: 20px;
    }
    
    /* Styles to hide controls in ads */
    .ad-playing #controls,
    .ad-playing #progressContainer,
    .ad-playing #timeContainer,
    .ad-playing #closeButton,
    .ad-playing #minimizeButton,
    .ad-playing .favorite-icon {
      display: none !important;
    }
    
    .ad-playing .cover-container {
      margin-bottom: 0;
    }
  </style>
</head>
<body>

  <div class="header">
    <div class="header-content">
      <a href="#" onclick="goToHome()" class="Texp">Music Live</a>
      <button class="theme-toggle" id="themeToggle">üåì</button>
    </div>
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Buscar canciones, artistas o √°lbumes..." oninput="searchSongs()">
    </div>
    <div class="artist-filter" id="artistFilter"></div>
    <div class="current-artist" id="currentArtist"></div>
  </div>

  <!-- Main categories container -->
  <div class="categories-container" id="categoriesContainer">
    <div class="category" id="trendingCategory">
      <h2 class="category-title"><span class="category-icon">üìà</span>Tendencias</h2>
      <div class="carousel" id="trending"></div>
    </div>
    
    <!-- Netflix-style video container -->
    <div class="video-container">
        <video class="netflix-style-video" controls poster="https://via.placeholder.com/800x450">
            <source src="https://www.dropbox.com/scl/fi/kt3ci1red4e4ium90tfm3/lv_0_20250612141648.mp4?rlkey=z8n5qq0g7u18r8v24a2vjfdy5&st=rkhhl1a7&raw=1" type="video/mp4">
            Tu navegador no soporta el elemento de video.
        </video>
        <div class="video-info">
            <h3 class="video-title">Music Live</h3>
        </div>
    </div>
    <div class="video-actions">
                <button class="play-button">‚ñ∂ Reproducir</button>
                <a href="https://www.youtube.com/@KERIMMUSIC4009?sub_confirmation=1" target="_blank" class="youtube-button">
                 <i class="fab fa-youtube"></i> Kerim Music
                 </a>
            </div>
    <div class="cover-container">
      <img src="https://cdn.pixabay.com/animation/2023/10/22/03/31/03-31-40-761_512.gif" alt="Portada musical" class="vertical-cover">
    </div>
    
    <!-- New followed artists section -->
    <div class="category" id="followedArtistsCategory" style="display: none;">
      <h2 class="category-title"><span class="category-icon">üë•</span>Artistas que sigues</h2>
      <div class="two-column-list" id="followedArtists"></div>
    </div>
    
    <div class="category" id="mostPlayedCategory">
      <h2 class="category-title"><span class="category-icon">üî•</span>Toda la musica</h2>
      <div class="two-column-list" id="mostPlayed"></div>
    </div>
  </div>

  <!-- Search results container (hidden initially) -->
  <div class="search-results-container" id="searchResultsContainer" style="display: none;">
    <h2 class="search-results-title" id="searchResultsTitle">Resultados de b√∫squeda</h2>
    <div class="search-results-grid" id="searchResultsGrid"></div>
    <div class="no-results" id="noResultsMessage" style="display: none;">No se encontraron resultados</div>
  </div>

  <div class="artist-profile" id="artistProfile" style="display: none;">
    <div class="artist-header">
      <img id="artistAvatar" src="" alt="Artista" class="artist-avatar">
      <h2 id="artistProfileName" class="artist-name">Nombre del Artista</h2>
      <button class="artist-button" id="followArtistBtn">Seguir</button>
      <button class="listen-artist-btn" id="listenArtistBtn">Escuchar solo a este artista</button>
    </div>
    <h3 class="artist-songs-title">Canciones</h3>
    <div class="two-column-list" id="artistSongs"></div>
    <a href="#" class="back-to-search" onclick="backToSearch()">Volver a la b√∫squeda</a>
  </div>

  <!-- Confirmation modal -->
  <div class="confirmation-modal" id="confirmationModal">
    <div class="confirmation-content">
      <h3 id="confirmationTitle">¬øDeseas escuchar solo m√∫sica de este artista?</h3>
      <p id="confirmationMessage">Se reproducir√°n solo las canciones de <span id="filterName"></span></p>
      <div class="confirmation-buttons">
        <button class="confirmation-btn yes" onclick="confirmFilter(true)">S√≠</button>
        <button class="confirmation-btn no" onclick="confirmFilter(false)">No</button>
      </div>
    </div>
  </div>

  <!-- Audio Player (hidden) -->
  <audio id="audioPlayer"></audio>
  <!-- Hidden audio player for preloading -->
  <audio id="bufferPlayer" style="display:none;"></audio>

  <!-- Floating Player -->
  <div id="floatingPlayer">
    <button id="closeButton" onclick="closePlayer()">√ó</button>
    <button id="minimizeButton" onclick="toggleMinimize()">_</button>
    
    <!-- Album image container with favorite icon -->
    <div class="cover-container">
      <img id="coverImage" src="" alt="Portada" crossorigin="anonymous">
      <div class="favorite-icon" id="floatingFavoriteIcon" onclick="toggleFavoriteFromPlayer(event)">‚ô°</div>
    </div>
    
    <div id="info">
      <strong id="songTitle">T√≠tulo</strong><br>
      <small id="artistName">Artista</small><br>
      <small id="albumTitle">√Ålbum</small><br>
    </div>

    <!-- Progress container -->
    <div id="progressContainer" onclick="setProgress(event)">
      <div id="progressBar"></div>
    </div>
    <div id="timeContainer">
      <span id="currentTime">0:00</span><span id="totalTime">0:00</span>
    </div>

    <div id="controls">
      <button onclick="prevTrack()">‚èÆ</button>
      <button id="playPauseButton" onclick="togglePlay()">‚ñ∂</button>
      <button onclick="nextTrack()">‚è≠</button>
      <button onclick="toggleShuffle()">üîÄ</button>
      <button onclick="togglePlaylist()">üìã</button>
    </div>
  </div>

  <!-- Playlist Panel -->
  <div id="playlistPanel">
    <h2>Lista de Reproducci√≥n</h2>
    <input type="text" id="playlistSearchInput" placeholder="Buscar en playlist..." oninput="searchPlaylist()">
    <div id="playlistItems"></div>
    <button id="closePlaylistButton">√ó</button>
  </div>

  <!-- Favorites Panel -->
  <div id="favoritesPanel">
    <button id="closeFavoritesButton" onclick="toggleFavoritesPanel()">√ó</button>
    <h2>Mis Favoritos</h2>
    <input type="text" id="favoritesSearchInput" placeholder="Buscar en favoritos..." oninput="searchFavorites()">
    <div id="favoritesItems"></div>
  </div>

  <!-- Followed Artists Panel -->
  <div id="followedArtistsPanel">
    <button id="closeFollowedArtistsButton" onclick="toggleFollowedArtistsPanel()">√ó</button>
    <h2>Artistas que sigues</h2>
    <div id="followedArtistsList"></div>
  </div>

  <!-- Favorites Button -->
  <button class="Favoritosbtn" onclick="toggleFavoritesPanel()">
    <span>üíÄ</span>
  </button>
  
  <!-- Followed Artists Button -->
  <button class="followed-artists-btn" onclick="toggleFollowedArtistsPanel()">
    <span>sig.</span>
  </button>

  <!-- Color Thief Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
  <!-- Font Awesome for YouTube icon -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

  <script>
    // Global variables
    let currentIndex = 0;
    let isPlaying = false;
    let isShuffle = false;
    let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
    let favoriteCounts = JSON.parse(localStorage.getItem('favoriteCounts')) || {};
    let playCounts = JSON.parse(localStorage.getItem('playCounts')) || {};
    let recentPlays = JSON.parse(localStorage.getItem('recentPlays')) || [];
    let currentPlaylist = [];
    let progressInterval;
    let currentArtistFilter = null;
    let currentAlbumFilter = null;
    let pendingFilter = null;
    let isDarkMode = localStorage.getItem('darkMode') !== 'false';
    let followedArtists = JSON.parse(localStorage.getItem('followedArtists')) || [];
    let nextTrackPreloaded = false;
    const colorThief = new ColorThief();

    // DOM elements
    const audioPlayer = document.getElementById('audioPlayer');
    const bufferPlayer = document.getElementById('bufferPlayer');
    const mostPlayedContainer = document.getElementById('mostPlayed');
    const trendingContainer = document.getElementById('trending');
    const followedArtistsContainer = document.getElementById('followedArtists');
    const playlistPanel = document.getElementById('playlistPanel');
    const playlistItems = document.getElementById('playlistItems');
    const favoritesPanel = document.getElementById('favoritesPanel');
    const favoritesItems = document.getElementById('favoritesItems');
    const floatingPlayer = document.getElementById('floatingPlayer');
    const coverImage = document.getElementById('coverImage');
    const artistFilterContainer = document.getElementById('artistFilter');
    const currentArtistDisplay = document.getElementById('currentArtist');
    const categoriesContainer = document.getElementById('categoriesContainer');
    const searchResultsContainer = document.getElementById('searchResultsContainer');
    const searchResultsGrid = document.getElementById('searchResultsGrid');
    const noResultsMessage = document.getElementById('noResultsMessage');
    const searchResultsTitle = document.getElementById('searchResultsTitle');
    const confirmationModal = document.getElementById('confirmationModal');
    const confirmationTitle = document.getElementById('confirmationTitle');
    const confirmationMessage = document.getElementById('confirmationMessage');
    const filterNameSpan = document.getElementById('filterName');
    const themeToggle = document.getElementById('themeToggle');
    const floatingFavoriteIcon = document.getElementById('floatingFavoriteIcon');
    const artistProfile = document.getElementById('artistProfile');
    const artistAvatar = document.getElementById('artistAvatar');
    const artistProfileName = document.getElementById('artistProfileName');
    const artistSongs = document.getElementById('artistSongs');
    const listenArtistBtn = document.getElementById('listenArtistBtn');
    const followArtistBtn = document.getElementById('followArtistBtn');
    const followedArtistsPanel = document.getElementById('followedArtistsPanel');
    const followedArtistsList = document.getElementById('followedArtistsList');
    const followedArtistsCategory = document.getElementById('followedArtistsCategory');

    // Song data with audio files
    const audioData = [
      {
        id: "audio63",
        audioSrc: "https://www.dropbox.com/scl/fi/m61e64x8j2s3lles47u99/Mentiras-LilCrazy-Ft-eMSECK.wav?rlkey=ha5zh40wzdzutmrnbiih2rn6c&st=r7m69y0s&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/8CKs8n67/FB-IMG-1750276140437.jpg",
        title: "Dulce Mentiras Ft Lil Crazy",
        artist: "Emsek",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio63",
        audioSrc: "https://www.dropbox.com/scl/fi/51f6kre78ckuv07wu202i/tefalle.wma?rlkey=1370se2orwqkl6em001invsoj&st=b5g760or&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Te falle",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio62",
        audioSrc: "https://www.dropbox.com/scl/fi/j6gyofex4ilsg7ufqjynb/soy-el-mismo-sain-nt.mp3?rlkey=7z5hmjvtw6k7ycng1dtsbg8jh&st=dkytyh89&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Soy el mismo",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
       {
        id: "audio61",
        audioSrc: "https://www.dropbox.com/scl/fi/w32a11405ox96obylj3yw/Sain-Nt-Mi-Culpa-Video-Oficial.mp3?rlkey=kebnf2oetl34p4ayog4r75ssx&st=8vpl5v6u&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Mi culpa",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio60",
        audioSrc: "https://www.dropbox.com/scl/fi/kgnaqxm9rdocl0j568ex5/SAIN-NT-TRAISION.wma?rlkey=2xu69xkii9yspbp66mp7s3q0q&st=q2r2o553&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Traision",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio59",
        audioSrc: "https://www.dropbox.com/scl/fi/rmxtxpsgh49u3eskxgnzx/sain-nt-heres.mp3?rlkey=bv6mtagzb2xxomq31myux706e&st=zz0eizk5&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Eres",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio58",
        audioSrc: "https://www.dropbox.com/scl/fi/p3y1d677cohaft8jn56x9/sain-nt-escapate.wma?rlkey=7qjy4l2ck1motrlj5qahoucdo&st=72531x8i&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Escapate",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio57",
        audioSrc: "https://www.dropbox.com/scl/fi/olkvysubz3soqc91onk3g/sain-nt-dicen.mp3?rlkey=l22zxk15yhha0foujp3x57dkt&st=gk9dzq05&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Dicen",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio56",
        audioSrc: "https://www.dropbox.com/scl/fi/oxi6rp0eo55ipvudq0i01/sain-nt-diabla.mp3?rlkey=t9ehha82pjsvl8gvwk21fegde&st=wz65o7lu&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Diabla",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio55",
        audioSrc: "https://www.dropbox.com/scl/fi/6fzs4cb946l5u5w98tp76/sain-nt-chanveale.mp3?rlkey=pp0i29n0ymcajrfunho7tcm4j&st=0l414g7i&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Chambeale",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio54",
        audioSrc: "https://www.dropbox.com/scl/fi/ojg1a6cymof6m3ou8dswg/sain-nt-debuelbeme-la-sonrisa.mp3?rlkey=comjjk1le7i4s6hyyhsqlof76&st=rzrql6mz&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Devuelveme la sonrisa",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio53",
        audioSrc: "https://www.dropbox.com/scl/fi/shoch99oi0v7oda13awdd/sain-nnt-ft-el-gary-tentacion.wma?rlkey=5j11ce7cv9aymm5rwzyrs1of2&st=6l4raydh&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Tentacion ft el Gary",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio52",
        audioSrc: "https://www.dropbox.com/scl/fi/xgajkjq30u3i2jbi44c52/sain-fallaste-ala-promesa.mp3?rlkey=k4zucjg9krw1lsnxc3joqah2t&st=716n4s0f&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Fallaste a la promesa",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio51",
        audioSrc: "https://www.dropbox.com/scl/fi/siiecb8sc8d0g2tlkqny8/presumen-sain-nt.mp3?rlkey=zh9tccvb9z6r152sa1ntcz9pf&st=h8p0f6ho&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Presumen",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
      {
        id: "audio50",
        audioSrc: "https://www.dropbox.com/scl/fi/ckvin6873x4slrqixafr5/me-sorprendi.mp3?rlkey=mme0049a91emytq9s4rlbht6i&st=ae30pgd7&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Me sorprendi",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2024-07-15"
      },
    {
        id: "audio49",
        audioSrc: "https://www.dropbox.com/scl/fi/blppw4ekk5yhae4qi8wl0/matame-sain-nt.wav?rlkey=5padz3puhrj6it9i9ry5jdr7z&st=7knwwuaw&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg",
        title: "Matame",
        artist: "Sain Nt",
        album: "Sin compromiso",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio48",
        audioSrc: "https://www.dropbox.com/scl/fi/c9ss4stui4mi1c6ku2w1r/Qui-reme-As.flac?rlkey=7vz44u6mff02f5h7nto5okcr0&st=1fov1e2m&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/NjYMhNy0/IMG-20250608-WA0006.jpg",
        title: "Quiereme Asi",
        artist: "Barrio Bajo M",
        album: "",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
    {
        id: "audio47",
        audioSrc: "https://www.dropbox.com/scl/fi/00twno5l0kdb08ue26non/Tiempo-Cie-campos-ft-J-Vazquez-Kerim-Music-LKN-Records..wav?rlkey=1ryk8nwj93j0nk9pt8pv6t9uv&st=3gw5neu3&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/Jnf5qwpx/Picsart-25-06-12-18-06-37-361.jpg",
        title: "Tiempo ft Cie campos",
        artist: "J Vazquez",
        album: "",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio46",
        audioSrc: "https://www.dropbox.com/scl/fi/vryu2d5x7jq072nku0cua/rojo-carmesicharls-weed.mp3?rlkey=msf2wwdoemidvesxr1ts22f8c&st=e60s8gmj&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pdb6SKVT/Picsart-25-06-07-22-20-50-148.jpg",
        title: "Rojo carne si",
        artist: "Charl s weed",
        album: "",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio45",
        audioSrc: "https://www.dropbox.com/scl/fi/kp60s913w97xpljdhg7uv/por-amor-al-artecharls-weed.mp3?rlkey=3tvg2k3ok8gvrtvw1ubg1mqw6&st=xq8zi11v&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pdb6SKVT/Picsart-25-06-07-22-20-50-148.jpg",
        title: "Por amor al arte",
        artist: "Charl s weed",
        album: "",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio44",
        audioSrc: "https://www.dropbox.com/scl/fi/proj264jl1eyy1rxi14pa/Charls-weed-yo-te-digo-que-te-quiero.wav?rlkey=o993ig1d0t2wgoy5tpcwv3rgw&st=sjyrda81&raw=1",
        cover: "https://i.postimg.cc/pdb6SKVT/Picsart-25-06-07-22-20-50-148.jpg",
        title: "Yo digo que te quiero",
        artist: "Charl s weed",
        album: "",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio44",
        audioSrc: "https://www.dropbox.com/scl/fi/cwvsaqz6w22cwlcf0nytb/charls-weed-disfruto.wav?rlkey=defd66t3bttv9b7ts4i02hxft&st=znrkbqe1&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pdb6SKVT/Picsart-25-06-07-22-20-50-148.jpg",
        title: "Disfruto",
        artist: "Charl s weed",
        album: "",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio43",
        audioSrc: "https://www.dropbox.com/scl/fi/kxe1iqcx6euhi6n3ao7h6/amor-de-un-segundocharls-weed.mp3?rlkey=ownvj9fjsft2mv5bybtloud5g&st=0m1o2bar&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/pdb6SKVT/Picsart-25-06-07-22-20-50-148.jpg",
        title: "Amor de un cegundo",
        artist: "Charl s weed",
        album: "",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio42",
        audioSrc: "https://www.dropbox.com/scl/fi/higcv4yxhf2z1exl4zovy/4-Linea-de-Meta-Tonny-Reyes.flac?rlkey=vkvhv5i73k8q3i25dx3vx9h7k&st=0eivekjo&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/szcBZ488/Picsart-25-06-07-19-49-43-853.jpg",
        title: "Linea de meta",
        artist: "Tonny Reyes",
        album: "",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
    {
        id: "audio41",
        audioSrc: "https://www.dropbox.com/scl/fi/pfrrfwvor80tartdkb4jh/2-Quiero-un-amor-Kinny-ft-Sain-Nt.flac?rlkey=bqvu00qnn8g5ztlmql2oxsvnu&st=06ueyhu1&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/8CZv7ZV7/Picsart-25-06-07-19-43-18-267.jpg",
        title: "Promesa de amor",
        artist: "Kinny Dr",
        album: "",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio40",
        audioSrc: "https://www.dropbox.com/scl/fi/hgi19gmw1o5fef57p2a8t/Lo-que-es-amar.wav?rlkey=oey80gh0tzx4gk3a37hbh51u7&st=j8g3eloz&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/sf9vGFrQ/Picsart-25-06-06-19-11-54-546.jpg",
        title: "Para amarte cover",
        artist: "Sain Nt",
        album: "",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio39",
        audioSrc: "https://www.dropbox.com/scl/fi/8rxh1zmz1jnbw3jnyw30u/Todo-se-Acabo-Emsek.wav?rlkey=gdjt2d5ixehg02f66zrmn2oo4&st=0i6u59nc&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/qqQFNy5t/Picsart-25-06-05-20-49-57-522.jpg",
        title: "Todo termino",
        artist: "Emsek",
        album: "Sin retorno al pasado",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio38",
        audioSrc: "https://www.dropbox.com/scl/fi/09x3ro2pgjk5uytus7qnf/perdoname-emsek-video-oficial.mp3?rlkey=w5wnge74deqrg9j5cugdgso93&st=lsdfyfaw&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/qqQFNy5t/Picsart-25-06-05-20-49-57-522.jpg",
        title: "Perdoname",
        artist: "Emsek",
        album: "Sin retorno al pasado",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio37",
        audioSrc: "https://www.dropbox.com/scl/fi/0b08k7lmf6bi3unghwi0o/Nada-es-secillo-Oswaldo.wav?rlkey=00zjb5omwsyc7lpa4epk2dxzx&st=ccg7kvut&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/qqQFNy5t/Picsart-25-06-05-20-49-57-522.jpg",
        title: "Nada es sencillo",
        artist: "Emsek",
        album: "Sin retorno al pasado",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio36",
        audioSrc: "https://www.dropbox.com/scl/fi/vyrkq3cz1d32v6cbrml99/Mi-mussa-Emsek-HFcompany-Estudios.wav?rlkey=8mzfyjhjbqasi7cvcynku8e29&st=vqt6f1jn&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/qqQFNy5t/Picsart-25-06-05-20-49-57-522.jpg",
        title: "Mi mussa",
        artist: "Emsek",
        album: "Sin retorno al pasado",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio35",
        audioSrc: "https://www.dropbox.com/scl/fi/scvt36sujqhsk7abj4q9g/Los-tiempos-cambian-Emsek-ft-Charl-s-weed.wav?rlkey=hbvmut3vj4wyx166y6nv53vi9&st=vin03rl8&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/qqQFNy5t/Picsart-25-06-05-20-49-57-522.jpg",
        title: "Los tiempos cambian",
        artist: "Emsek ft charl s weed",
        album: "Sin retorno al pasado",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio34",
        audioSrc: "https://www.dropbox.com/scl/fi/4q3fc1b7dcbm3s0irdriy/Emsek-tus-errores.wav?rlkey=dn1bgzk4im7jwxo5p46osot4h&st=rtaznshz&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/qqQFNy5t/Picsart-25-06-05-20-49-57-522.jpg",
        title: "Tus errores",
        artist: "Emsek",
        album: "Sin retorno al pasado",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio33",
        audioSrc: "https://www.dropbox.com/scl/fi/rv1nm22lnovi1phko6ufn/Emsek-No-fue-lo-mismo.wav?rlkey=ojx6h1hpudu8q9v4h0b5ncm77&st=mwv4rcsk&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/qqQFNy5t/Picsart-25-06-05-20-49-57-522.jpg",
        title: "No fue lo mismo",
        artist: "Emsek",
        album: "Sin retorno al pasado",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio Anuncio1",
        audioSrc: "https://www.dropbox.com/scl/fi/dy2jhy8n06e4hckngg1o7/Que-son-los-Spots.mp3?rlkey=s9jv5rspyv7zwoyyofcvi3art&st=7rxsdd2f&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/FH2p8Xvm/Picsart-25-06-07-22-44-53-231.jpg",
        title: "¬øQue es un Spots?",
        artist: "Kerim Music",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio32",
        audioSrc: "https://www.dropbox.com/scl/fi/veoiwn4fh0ikcb6rqn39y/Emsek-len-busca-de-labictoria.wav?rlkey=40y7btf8uvd4bxxpk4uaogiwv&st=9my5bur7&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/qqQFNy5t/Picsart-25-06-05-20-49-57-522.jpg",
        title: "En busca de la victoria",
        artist: "Emsek",
        album: "Sin retorno al pasado",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio31",
        audioSrc: "https://www.dropbox.com/scl/fi/jk2c7g0fixoaqv5e5ajri/El-fin-de-hiastoria-EMSEK.wav?rlkey=kxgq808oded0cdhcd6woh3tdz&st=27t00kb8&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/qqQFNy5t/Picsart-25-06-05-20-49-57-522.jpg",
        title: "El fin de la historia",
        artist: "Emsek",
        album: "Sin retorno al pasado",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio30",
        audioSrc: "https://www.dropbox.com/scl/fi/1cryb2i8f0nrl9e1jrqs6/Donde-estan-Emsek-1.wav?rlkey=2diknqmy040c6nqsmud6gk4y5&st=emsijin5&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/qqQFNy5t/Picsart-25-06-05-20-49-57-522.jpg",
        title: "Donde estan",
        artist: "Emsek",
        album: "Sin retorno al pasado",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio29",
        audioSrc: "https://www.dropbox.com/scl/fi/yhwywjevsxs0b6dx94o9p/DICE3N-DEMI-EMSEK.wav?rlkey=2qrzmoa94dmd6ytnq2jdvdxgw&st=z6vk3q4b&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/qqQFNy5t/Picsart-25-06-05-20-49-57-522.jpg",
        title: "Dicen",
        artist: "Emsek",
        album: "Sin retorno al pasado",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
       {
        id: "audio28",
        audioSrc: "https://www.dropbox.com/scl/fi/rq7dnfuqaywgjdo6dp9de/1-Modo-avion-Dany-Zm-El-rencuentro..flac?rlkey=xfv7h1xurdroh0ct3xu71ge9m&st=3lk9eqin&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/y6GCPTbn/Picsart-25-06-05-21-21-40-631.jpg",
        title: "Modo Avion",
        artist: "Dany Zm",
        album: "El rencuentro",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio27",
        audioSrc: "https://www.dropbox.com/scl/fi/a114cb367y2fxgvs9i3w1/La-MA-ANITAS.mp3?rlkey=98qb6m495r0e6xhobel6q8po6&st=04cdw74n&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/BvtnJNRL/Picsart-25-06-05-18-32-58-256.jpg",
        title: "Las Ma√±anitas, dia de las madres",
        artist: "Sain Nt",
        album: "",
        category: [""],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio26",
        audioSrc: "https://www.dropbox.com/scl/fi/5dlej4wkll16uxyz3knwf/vuelve-9-dany-zm.mp3?rlkey=1mw4i576qw1q6xn4wofshg3gz&st=wx7ody7c&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/2yd5fvpV/FB-IMG-1749150048969.jpg",
        title: "Vuelve",
        artist: "Dany Zm",
        album: "Construyendo el barco",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio25",
        audioSrc: "https://www.dropbox.com/scl/fi/xmca1v67r0foa02ah0ix5/nuestro-cuento-7-dany-zm.mp3?rlkey=4wdtldt4ch8usesgbsqdkl0o1&st=0mvohs3m&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/2yd5fvpV/FB-IMG-1749150048969.jpg",
        title: "Nuestro cuento",
        artist: "Dany Zm",
        album: "Construyendo el barco",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio24",
        audioSrc: "https://www.dropbox.com/scl/fi/ybuowdfnam5frrjksy570/me-dejo-solo-5-dany-zm.mp3?rlkey=9oiwuxep5v6se4r7af6qlwhb2&st=vcwj9wi8&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/2yd5fvpV/FB-IMG-1749150048969.jpg",
        title: "Me dejo solo",
        artist: "Dany Zm ft Sain Nt y Yescor Cruz",
        album: "Construyendo el barco",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio23",
        audioSrc: "https://www.dropbox.com/scl/fi/fo85o8m1etbo68m9a46xq/lluvia-8-dany-zm.mp3?rlkey=ywh0y4ezduhd3q7bjvh5orki1&st=kpitzejm&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/2yd5fvpV/FB-IMG-1749150048969.jpg",
        title: "Lluvia",
        artist: "Dany Zm",
        album: "Construyendo el barco",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio22",
        audioSrc: "https://www.dropbox.com/scl/fi/6588ikrqstte1wzjkreja/hasta-cuando-1-dany-zm.mp3?rlkey=uqpq1cpmnj1e5pnd5ndxwpb47&st=27b4klc9&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/2yd5fvpV/FB-IMG-1749150048969.jpg",
        title: "Hasta cuando",
        artist: "Dany Zm",
        album: "Construyendo el barco",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio21",
        audioSrc: "https://www.dropbox.com/scl/fi/7qvtyhs6smsgnu56z9ch7/en-gano-6-dany-zm.mp3?rlkey=lzu6kbgqicirph9sp4ndhyq90&st=mgjaykqv&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/2yd5fvpV/FB-IMG-1749150048969.jpg",
        title: "Enga√±o",
        artist: "Dany Zm",
        album: "Construyendo el barco",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio20",
        audioSrc: "https://www.dropbox.com/scl/fi/han7yoy13ncejnz4exj3r/dalex-especial-cover-dany-zm.mp3?rlkey=8pchaqdtz2iq854i8zrhxfriw&st=qpusqj1c&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/2yd5fvpV/FB-IMG-1749150048969.jpg",
        title: "Especial cover",
        artist: "Dany Zm",
        album: "Construyendo el barco",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio19",
        audioSrc: "https://www.dropbox.com/scl/fi/l4d8dvoahieq4yqf536ol/CORITO-SANO-DANY-ZM-VA-YEZKOR-CRUZ-SAIN-NT-VERSION-T.E.C.mp3?rlkey=wsj8578k3e14hqr74npb3krjb&st=dpex1ugt&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/2yd5fvpV/FB-IMG-1749150048969.jpg",
        title: "Corito sano",
        artist: "Dany Zm",
        album: "Construyendo el barco",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio18",
        audioSrc: "https://www.dropbox.com/scl/fi/v4remtzyol50e00rvhpen/beyby-4dany-zm.mp3?rlkey=y803hhbgxghxrlgsvpe9w16i9&st=z26xha37&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/2yd5fvpV/FB-IMG-1749150048969.jpg",
        title: "Bay bay",
        artist: "Dany Zm",
        album: "Construyendo el barco",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio17",
        audioSrc: "https://www.dropbox.com/scl/fi/ctedqktecjqbqvd2t5uct/bailado-3-dany-zm.mp3?rlkey=l1zrwqrevorjbxjq3u7gi4k3t&st=ujnra5ts&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/2yd5fvpV/FB-IMG-1749150048969.jpg",
        title: "Bailalo",
        artist: "Dany Zm",
        album: "Construyendo el barco",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio16",
        audioSrc: "https://www.dropbox.com/scl/fi/lbohzzgaf7xnw1v7o3ec9/ay-estare-2-dany-zm.mp3?rlkey=41qeo3w154ctk8gvlzl2aa0v1&st=vfjq6vql&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/2yd5fvpV/FB-IMG-1749150048969.jpg",
        title: "Hay estare",
        artist: "Dany Zm",
        album: "Construyendo el barco",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio15",
        audioSrc: "https://www.dropbox.com/scl/fi/rpcuad35hjh9pnwm890mt/CONFIA-EN-MIALEXX-CRAZY-FT-SAIN-NT-DOBLE-AA-NC-BEATS.mp3?rlkey=lcom1zmvuhptrui5cyyxex7vj&st=7f76fnfo&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/cHwpq9xH/Picsart-25-06-04-21-53-31-587.jpg",
        title: "Confia en mi",
        artist: "Alexx Crazy Ft Sain Nt",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio14",
        audioSrc: "https://www.dropbox.com/scl/fi/dxhc72dtjjadyzrwupddg/Cosas-de-la-vida-Escribo.wav?rlkey=li3bvmvax97t2f4ion1oiffw8&st=pc6b4j2z&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/rwC9j8zz/Picsart-25-06-04-14-11-53-030.jpg",
        title: "Cosas De la vida",
        artist: "Escribo",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio13",
        audioSrc: "https://www.dropbox.com/scl/fi/xojiflo0c5ydogct9j40v/Escribo.wav?rlkey=wmpwws77lgru2oniwrak9vv8r&st=0inkf8f4&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/rwC9j8zz/Picsart-25-06-04-14-11-53-030.jpg",
        title: "Me siento mal",
        artist: "Escribo",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio12",
        audioSrc: "https://www.dropbox.com/scl/fi/7ydiw8abe4r4fxfiiz5ij/Pensando-Escribo.wav?rlkey=elx3ydjh5rkfz2qcqekbgc9yp&st=79eg583g&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/rwC9j8zz/Picsart-25-06-04-14-11-53-030.jpg",
        title: "Pensado",
        artist: "Escribo",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio11",
        audioSrc: "https://www.dropbox.com/scl/fi/vl4d6mwau9frvxmjm6wwn/Baner.mp3?rlkey=z8jezojlzlyt0i3qp16jrvid9&st=4agh5qsj&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/3RCBGNyR/Picsart-25-06-03-20-44-36-410.jpg",
        title: "Banner",
        artist: "Kerim Music",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },    
       {
        id: "audio10",
        audioSrc: "https://www.dropbox.com/scl/fi/p3nwbfs8wl2cm1woqmb0h/ElevenLabs_2025-06-04T02_25_48_Aria_pre_sp115_s100_sb75_se0_b_m2.mp3?rlkey=s2w83bxhego9gh1qirr2sqgt5&st=95h0fkmg&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/8CKdkTGx/Picsart-25-05-31-18-33-42-979.jpg",
        title: "Cierra Lo Ojos",
        artist: "Sain Nt",
        album: "Proximamente",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },    
      {
        id: "audio9",
        audioSrc: "https://www.dropbox.com/scl/fi/ot7jezdupw1r44x4a1cci/Recuedos-Aizber-Kerim-Music.mp3?rlkey=rg0efmei6dohoauwqv1u7cgmu&st=5hkexws7&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/yYSYd3rh/FB-IMG-1749001269577.jpg",
        title: "Recuerdos",
        artist: "Aizber",
        album: "HFcompany",
        category: [""],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio8",
        audioSrc: "https://www.dropbox.com/scl/fi/n66wxeygxd8ddchrls1kv/Me-estoy-muriendo-clave-462.wav?rlkey=hfkc487fwb71ziploobu8duqi&st=3cfmfsh9&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/8z3x28cH/Picsart-25-06-03-19-20-10-165.jpg",
        title: "Me estoy muriendo",
        artist: "Clave 462",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio Anuncio2",
        audioSrc: "https://www.dropbox.com/scl/fi/dy2jhy8n06e4hckngg1o7/Que-son-los-Spots.mp3?rlkey=s9jv5rspyv7zwoyyofcvi3art&st=7rxsdd2f&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/PrsytN40/Picsart-25-06-03-21-27-48-722.jpg",
        title: "¬øQue es un Spots?",
        artist: "Kerim Music",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio7",
        audioSrc: "https://www.dropbox.com/scl/fi/5ojo4u3dak6gytmkcy605/j-vazquez-me-vuelve-loco-fusa-company.mp3?rlkey=ickcmbzdf3wi1k012e0mygo8e&st=kalzh6lp&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/mkxVhjff/Picsart-25-06-03-17-24-44-959.jpg",
        title: "Me vuelve loco",
        artist: "J Vazquez",
        album: "HFcompany",
        category: [""],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio6",
        audioSrc: "https://www.dropbox.com/scl/fi/dwovntv7djswyqmguk8yd/j-vazquez-aventura-ft-cie-campos-video-liryc.mp3?rlkey=3durnbujd9955pikh47jgyjob&st=rs54jzat&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/mkxVhjff/Picsart-25-06-03-17-24-44-959.jpg",
        title: "Aventirua",
        artist: "J Vazquez",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
       {
        id: "audio5",
        audioSrc: "https://www.dropbox.com/scl/fi/fi7vh0aizey6iod26en48/Obsecion-j-vazquez.wav?rlkey=ch8el1ronylotfeqyv6romnur&st=e7kyu6wn&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/mkxVhjff/Picsart-25-06-03-17-24-44-959.jpg",
        title: "Obsecion",
        artist: "J Vazquez",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
       {
        id: "audio4",
        audioSrc: "https://www.dropbox.com/scl/fi/3gnc6sadywpb24ps9z4k9/No-eres-juego-de-nintendo-J-bazquez.wav?rlkey=79nintn3bhle2lyye1nb249e6&st=98gkmxqw&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/mkxVhjff/Picsart-25-06-03-17-24-44-959.jpg",
        title: "No soy un jugete de nintendo",
        artist: "J Vazquez",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio Anuncio3",
        audioSrc: "https://www.dropbox.com/scl/fi/pxrqa5u0yt4xxapqh2erz/Informaci-n.mp3?rlkey=bwi9foffmxn0v9qyr7uk6hf1b&st=zqrfk9kd&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/9V4WSzq1/Picsart-25-06-03-21-12-45-867.jpg",
        title: "Informacion",
        artist: "Kerim Music",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio1",
        audioSrc: "https://www.dropbox.com/scl/fi/0ufgsv01ji48kj287katv/08-Ad-n-G-x-Sain-Nt-ENVIDIOSOS-REMIX-CON-UE-OS-IN-DINERO.mp3?rlkey=qokxn4amhjr0hmtnhk7bejsje&st=kx7il6mj&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/d0CNHsX2/travis-scott-birds-in-the-trap-sing-mcknight-portada.jpg",
        title: "Envidiosos remix",
        artist: "Sain Nt",
        album: "Kerim Music",
        category: ["trending"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio3",
        audioSrc: "https://www.dropbox.com/scl/fi/o3tlmgi9pxcpe0g3gbeb0/j-vazquez-FOTO.wav?rlkey=2fe5pexgflyf0uktod1hmlq51&st=izm9vial&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/mkxVhjff/Picsart-25-06-03-17-24-44-959.jpg",
        title: "Foto",
        artist: "J Vazquez",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
      {
        id: "audio Anuncio4",
        audioSrc: "https://www.dropbox.com/scl/fi/9yboeqg2lw5wq3s2txksa/favoritas.mp3?rlkey=ggk92138pdi5eqa732kcqg0l1&st=a0vf7iiv&raw=1", // Audio de muestra 2
        cover: "https://i.postimg.cc/gjWvP86d/Picsart-25-06-04-16-59-42-448.jpg",
        title: "¬øQueson los favoritos?",
        artist: "Kerim Music",
        album: "HFcompany",
        category: ["mostPlayed"],
        releaseDate: "2023-07-15"
      },
    ];

    // Function to check if current song is an ad
    function isCurrentSongAd() {
      const currentSong = currentPlaylist[currentIndex];
      return currentSong && currentSong.id.startsWith("audio Anuncio");
    }

    // Function to update controls visibility based on song type
    function updateControlsVisibility() {
      if (isCurrentSongAd()) {
        floatingPlayer.classList.add('ad-playing');
      } else {
        floatingPlayer.classList.remove('ad-playing');
      }
    }

    // Function to preload next track
    function preloadNextTrack() {
      if (currentPlaylist.length <= 1) return;
      
      const nextIndex = isShuffle ? 
        getRandomIndexDifferentFromCurrent() : 
        (currentIndex + 1) % currentPlaylist.length;
      
      const nextSong = currentPlaylist[nextIndex];
      if (nextSong) {
        bufferPlayer.src = nextSong.audioSrc;
        bufferPlayer.load();
        nextTrackPreloaded = true;
      }
    }

    // Function to get random index different from current
    function getRandomIndexDifferentFromCurrent() {
      if (currentPlaylist.length <= 1) return 0;
      
      let newIndex;
      do {
        newIndex = Math.floor(Math.random() * currentPlaylist.length);
      } while (newIndex === currentIndex);
      
      return newIndex;
    }

    // Function to show/hide followed artists panel
    function toggleFollowedArtistsPanel() {
      if (followedArtistsPanel.style.display === "block") {
        followedArtistsPanel.style.display = "none";
      } else {
        followedArtistsPanel.style.display = "block";
        renderFollowedArtistsList();
      }
    }

    // Function to render followed artists list
    function renderFollowedArtistsList() {
      followedArtistsList.innerHTML = '';
      
      if (followedArtists.length === 0) {
        followedArtistsList.innerHTML = '<div class="no-followed-artists">No sigues a ning√∫n artista todav√≠a</div>';
        return;
      }
      
      followedArtists.forEach(artist => {
        // Find a song by the artist to get the image
        const artistSong = audioData.find(song => song.artist === artist);
        
        const artistElement = document.createElement('div');
        artistElement.className = 'followed-artist';
        artistElement.innerHTML = `
          <img src="${artistSong ? artistSong.cover : 'https://via.placeholder.com/60'}" class="followed-artist-avatar" alt="${artist}">
          <div class="followed-artist-info">
            <div class="followed-artist-name">${artist}</div>
            <div class="followed-artist-songs">${getArtistSongCount(artist)} canciones</div>
          </div>
          <button class="unfollow-btn" onclick="unfollowArtist('${artist}', event)">Dejar de seguir</button>
        `;
        
        // Add event to view artist profile
        artistElement.addEventListener('click', function(e) {
          // Prevent event if clicked on unfollow button
          if (!e.target.classList.contains('unfollow-btn')) {
            showArtistProfile(artist);
            followedArtistsPanel.style.display = "none";
          }
        });
        
        followedArtistsList.appendChild(artistElement);
      });
    }

    // Function to get artist song count
    function getArtistSongCount(artistName) {
      return audioData.filter(song => song.artist === artistName).length;
    }

    // Function to follow/unfollow artist
    function toggleFollowArtist(artistName) {
      const index = followedArtists.indexOf(artistName);
      if (index === -1) {
        // Follow artist
        followedArtists.push(artistName);
        followArtistBtn.textContent = "Siguiendo ‚úì";
        followArtistBtn.style.backgroundColor = "#4CAF50";
      } else {
        // Unfollow artist
        followedArtists.splice(index, 1);
        followArtistBtn.textContent = "Seguir";
        followArtistBtn.style.backgroundColor = "";
      }
      
      // Save to localStorage
      localStorage.setItem('followedArtists', JSON.stringify(followedArtists));
      
      // Update followed artists list
      renderFollowedArtistsList();
      updateFollowedArtistsSection();
    }

    // Function to unfollow artist from list
    function unfollowArtist(artistName, event) {
      event.stopPropagation(); // Prevent event bubbling
      
      const index = followedArtists.indexOf(artistName);
      if (index !== -1) {
        followedArtists.splice(index, 1);
        localStorage.setItem('followedArtists', JSON.stringify(followedArtists));
        renderFollowedArtistsList();
        updateFollowedArtistsSection();
        
        // If we're on artist profile, update button
        if (artistProfileName.textContent === artistName) {
          followArtistBtn.textContent = "Seguir";
          followArtistBtn.style.backgroundColor = "";
        }
      }
    }

    // Function to update followed artists section
    function updateFollowedArtistsSection() {
      if (followedArtists.length > 0) {
        followedArtistsCategory.style.display = 'block';
        
        // Get followed artists info
        const followedArtistsData = followedArtists.map(artist => {
          const artistSong = audioData.find(song => song.artist === artist);
          return {
            name: artist,
            cover: artistSong ? artistSong.cover : 'https://via.placeholder.com/160',
            songCount: getArtistSongCount(artist)
          };
        });
        
        // Render followed artists
        renderFollowedArtistsInCategory(followedArtistsContainer, followedArtistsData);
      } else {
        followedArtistsCategory.style.display = 'none';
      }
    }

    // Function to render followed artists in category
    function renderFollowedArtistsInCategory(container, artists) {
      container.innerHTML = "";
      
      artists.forEach((artist, index) => {
        const artistElement = document.createElement("div");
        artistElement.className = "song-item";
        artistElement.style.animationDelay = `${index * 0.1}s`;
        artistElement.innerHTML = `
          <img src="${artist.cover}" alt="${artist.name}" onclick="showArtistProfile('${artist.name}')">
          <div class="song-info">
            <span class="song-title">${artist.name}</span>
            <span class="artist-name">${artist.songCount} canciones</span>
          </div>
        `;
        container.appendChild(artistElement);
      });
    }

    // Function to show artist profile
    function showArtistProfile(artistName) {
      // Hide all containers
      categoriesContainer.style.display = 'none';
      searchResultsContainer.style.display = 'none';
      
      // Show artist profile
      artistProfile.style.display = 'block';
      
      // Set artist info
      artistProfileName.textContent = artistName;
      
      // Find first song by artist to get avatar image
      const artistSong = audioData.find(song => song.artist === artistName);
      if (artistSong) {
        artistAvatar.src = artistSong.cover;
      }
      
      // Update follow button
      const isFollowing = followedArtists.includes(artistName);
      followArtistBtn.textContent = isFollowing ? "Siguiendo ‚úì" : "Seguir";
      followArtistBtn.style.backgroundColor = isFollowing ? "#4CAF50" : "";
      
      // Set click event for follow/unfollow
      followArtistBtn.onclick = function(e) {
        e.stopPropagation();
        toggleFollowArtist(artistName);
      };
      
      // Filter artist songs
      const artistSongsList = audioData.filter(song => song.artist === artistName);
      
      // Render artist songs
      renderSongsInCategory(artistSongs, artistSongsList, "artist");
      
      // Set listen to this artist button
      listenArtistBtn.onclick = function() {
        filterByArtist(artistName);
      };
    }

    // Function to go back to search from artist profile
    function backToSearch() {
      artistProfile.style.display = 'none';
      searchResultsContainer.style.display = 'block';
      
      // Reset playlist to all songs
      currentPlaylist = audioData;
    }

    // Function to filter by artist
    function filterByArtist(artistName) {
      currentArtistFilter = artistName;
      currentAlbumFilter = null;
      
      // Show current artist name
      currentArtistDisplay.textContent = `Mostrando: ${artistName}`;
      currentArtistDisplay.style.display = 'block';
      
      // Update artist filter buttons
      updateArtistFilterButtons();
      
      // Hide all categories except "All music"
      document.querySelectorAll('.category').forEach(category => {
        if (category.id !== 'mostPlayedCategory') {
          category.style.display = 'none';
        }
      });
      
      // Filter songs in "All music" to show only artist's songs
      const mostPlayedSongs = [...audioData]
        .filter(song => song.artist.toLowerCase() === artistName.toLowerCase())
        .sort(() => Math.random() - 0.5);
      
      renderSongsInCategory(mostPlayedContainer, mostPlayedSongs, "plays");
      
      // Set current playlist to only artist's songs
      currentPlaylist = mostPlayedSongs;
      
      // If there are songs, play the first one
      if (currentPlaylist.length > 0) {
        currentIndex = 0;
        loadTrack(currentIndex);
        audioPlayer.play();
        isPlaying = true;
        document.getElementById('playPauseButton').textContent = '‚è∏';
      }
    }

    // Function to toggle dark/light mode
    function toggleDarkMode() {
      isDarkMode = !isDarkMode;
      localStorage.setItem('darkMode', isDarkMode);
      applyTheme();
    }

    // Function to apply selected theme
    function applyTheme() {
      if (isDarkMode) {
        document.body.classList.remove('light-mode');
        themeToggle.textContent = 'üåì';
      } else {
        document.body.classList.add('light-mode');
        themeToggle.textContent = 'üåû';
      }
    }

    // Function to add/remove favorites from floating player
    function toggleFavoriteFromPlayer(event) {
      event.stopPropagation();
      const currentSong = currentPlaylist[currentIndex];
      if (currentSong) {
        toggleFavorite(currentSong.id, event);
        updateFloatingFavoriteIcon(currentSong.id);
      }
    }

    // Function to update favorite icon in floating player
    function updateFloatingFavoriteIcon(songId) {
      if (favorites.includes(songId)) {
        floatingFavoriteIcon.classList.add('added');
      } else {
        floatingFavoriteIcon.classList.remove('added');
      }
    }

    // Function to go to home (gallery)
    function goToHome() {
      // Hide search results and artist profile
      searchResultsContainer.style.display = 'none';
      artistProfile.style.display = 'none';
      
      // Show categories container
      categoriesContainer.style.display = 'block';
      
      // Clear any filters
      clearArtistFilter();
      clearAlbumFilter();
      
      // Scroll to top
      window.scrollTo(0, 0);
    }

    // Register Service Worker for PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').then(registration => {
          console.log('ServiceWorker registration successful');
        }).catch(err => {
          console.log('ServiceWorker registration failed: ', err);
        });
      });
    }

    // Media Session API for lock screen controls
    if ('mediaSession' in navigator) {
      navigator.mediaSession.setActionHandler('play', function() {
        audioPlayer.play();
        isPlaying = true;
        document.getElementById('playPauseButton').textContent = '‚è∏';
      });

      navigator.mediaSession.setActionHandler('pause', function() {
        audioPlayer.pause();
        isPlaying = false;
        document.getElementById('playPauseButton').textContent = '‚ñ∂';
      });

      navigator.mediaSession.setActionHandler('previoustrack', function() {
        prevTrack();
      });

      navigator.mediaSession.setActionHandler('nexttrack', function() {
        nextTrack();
      });
    }

    // Function to update Media Session metadata
    function updateMediaMetadata(song) {
      if ('mediaSession' in navigator) {
        navigator.mediaSession.metadata = new MediaMetadata({
          title: song.title,
          artist: song.artist,
          album: song.album || '',
          artwork: [
            { src: song.cover, sizes: '96x96', type: 'image/jpg' },
            { src: song.cover, sizes: '128x128', type: 'image/jpg' },
            { src: song.cover, sizes: '192x192', type: 'image/jpg' },
            { src: song.cover, sizes: '256x256', type: 'image/jpg' },
            { src: song.cover, sizes: '384x384', type: 'image/jpg' },
            { src: song.cover, sizes: '512x512', type: 'image/jpg' }
          ]
        });
      }
    }

    // Function to update background color based on cover
    function updateBackgroundColorFromCover() {
      if (!coverImage.complete) {
        coverImage.addEventListener('load', function() {
          extractAndSetColor();
        });
      } else {
        extractAndSetColor();
      }
    }

    // Function to extract and set color
    function extractAndSetColor() {
      try {
        // Get dominant color from image
        const dominantColor = colorThief.getColor(coverImage);
        const [r, g, b] = dominantColor;
        
        // Convert RGB to HSL to adjust lightness
        const hsl = rgbToHsl(r, g, b);
        
        // Adjust lightness for background (darker)
        hsl[2] = Math.max(10, hsl[2] * 0.3);
        
        // Convert back to RGB
        const adjustedRgb = hslToRgb(hsl[0], hsl[1], hsl[2]);
        
        // Apply color to player with transparency
        floatingPlayer.style.backgroundColor = `rgba(${adjustedRgb[0]}, ${adjustedRgb[1]}, ${adjustedRgb[2]}, 0.85)`;
        
        // Adjust text color for better contrast
        const textColor = getContrastColor(adjustedRgb);
        document.getElementById('info').style.color = textColor;
        document.getElementById('songTitle').style.color = textColor;
        document.getElementById('artistName').style.color = textColor;
        document.getElementById('albumTitle').style.color = textColor;
      } catch (e) {
        console.error("Error extracting cover color:", e);
        // Fallback color
        floatingPlayer.style.backgroundColor = isDarkMode ? 'rgba(0, 0, 0, 0.9)' : 'rgba(255, 255, 255, 0.95)';
        document.getElementById('info').style.color = isDarkMode ? 'rgb(255, 145, 0)' : '#ff6b00';
        document.getElementById('songTitle').style.color = isDarkMode ? 'rgb(255, 145, 0)' : '#ff6b00';
        document.getElementById('artistName').style.color = isDarkMode ? '#ccc' : '#666';
        document.getElementById('albumTitle').style.color = isDarkMode ? '#ccc' : '#666';
      }
    }

    // Function to convert RGB to HSL
    function rgbToHsl(r, g, b) {
      r /= 255, g /= 255, b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;

      if (max === min) {
        h = s = 0; // achromatic
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }

      return [h * 360, s * 100, l * 100];
    }

    // Function to convert HSL to RGB
    function hslToRgb(h, s, l) {
      h /= 360;
      s /= 100;
      l /= 100;
      let r, g, b;

      if (s === 0) {
        r = g = b = l; // achromatic
      } else {
        const hue2rgb = (p, q, t) => {
          if (t < 0) t += 1;
          if (t > 1) t -= 1;
          if (t < 1/6) return p + (q - p) * 6 * t;
          if (t < 1/2) return q;
          if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
          return p;
        };

        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
      }

      return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
    }

    // Function to determine text color with best contrast
    function getContrastColor(rgb) {
      // Calculate relative luminance (WCAG formula)
      const luminance = (0.2126 * rgb[0] + 0.7152 * rgb[1] + 0.0722 * rgb[2]) / 255;
      return luminance > 0.5 ? '#333' : '#fff';
    }

    // Audio player event listeners
    audioPlayer.addEventListener('play', () => {
      isPlaying = true;
      document.getElementById('playPauseButton').textContent = '‚è∏';
      startProgressTimer();
      
      // Increment play count when playback starts
      const currentSong = currentPlaylist[currentIndex];
      if (currentSong) {
        incrementPlayCount(currentSong.id);
      }
      
      // Update controls visibility
      updateControlsVisibility();
      
      // Preload next track
      preloadNextTrack();
    });

    audioPlayer.addEventListener('pause', () => {
      isPlaying = false;
      document.getElementById('playPauseButton').textContent = '‚ñ∂';
      clearInterval(progressInterval);
    });

    audioPlayer.addEventListener('ended', () => {
      // Automatically play next track
      if (currentPlaylist.length > 0) {
        if (isShuffle) {
          // If shuffle mode, select random track different from current
          currentIndex = getRandomIndexDifferentFromCurrent();
        } else {
          // If not shuffle mode, go to next track
          currentIndex = (currentIndex + 1) % currentPlaylist.length;
        }
        
        // If next track is already preloaded, use it
        if (nextTrackPreloaded) {
          // Swap players
          const tempSrc = audioPlayer.src;
          audioPlayer.src = bufferPlayer.src;
          bufferPlayer.src = '';
          
          // Update UI
          const nextSong = currentPlaylist[currentIndex];
          document.getElementById('songTitle').textContent = nextSong.title;
          document.getElementById('artistName').textContent = nextSong.artist;
          document.getElementById('albumTitle').textContent = nextSong.album || '';
          document.getElementById('coverImage').src = nextSong.cover;
          
          // Update favorite icon
          updateFloatingFavoriteIcon(nextSong.id);
          
          // Update metadata for lock screen
          updateMediaMetadata(nextSong);
          
          // Update playlist to highlight current track
          updatePlaylistHighlight();
          
          // Play
          audioPlayer.play();
          
          // Preload next track
          preloadNextTrack();
        } else {
          // If not preloaded, load normally
          loadTrack(currentIndex);
          audioPlayer.play();
        }
      }
    });

    audioPlayer.addEventListener('timeupdate', updateProgress);

    audioPlayer.addEventListener('loadedmetadata', () => {
      updateProgress();
    });

    audioPlayer.addEventListener('error', (e) => {
      console.error('Audio playback error:', e);
      // Try to load next track if error occurs
      setTimeout(() => {
        nextTrack();
      }, 1000);
    });

    // Buffer player event listener
    bufferPlayer.addEventListener('error', (e) => {
      console.error('Preload audio error:', e);
      nextTrackPreloaded = false;
    });

    bufferPlayer.addEventListener('canplaythrough', () => {
      // Track is ready to play without interruptions
      console.log('Track preloaded and ready');
    });

    // Function to start progress timer
    function startProgressTimer() {
      clearInterval(progressInterval);
      progressInterval = setInterval(updateProgress, 100);
    }

    // Function to update progress bar
    function updateProgress() {
      if (!audioPlayer) return;
      
      const currentTime = audioPlayer.currentTime;
      const duration = audioPlayer.duration || 0;
      
      // Calculate progress percentage
      const percentage = (currentTime / duration) * 100;
      
      // Update progress bar
      document.getElementById('progressBar').style.width = `${percentage}%`;
      
      // Update times
      updateTimes(currentTime, duration);
      
      // Preload next track when current track is almost over
      if (duration > 0 && !nextTrackPreloaded && (duration - currentTime) < 10) {
        preloadNextTrack();
      }
    }

    // Function to format and display times
    function updateTimes(currentTime, duration) {
      const formatTime = (time) => {
        const minutes = Math.floor(time / 60);
        const seconds = Math.floor(time % 60);
        return `${minutes}:${seconds.toString().padStart(2, '0')}`;
      };
      
      document.getElementById('currentTime').textContent = formatTime(currentTime);
      document.getElementById('totalTime').textContent = formatTime(duration);
    }

    // Function to set playback position
    function setProgress(event) {
      if (!audioPlayer) return;
      
      const progressContainer = event.currentTarget;
      const rect = progressContainer.getBoundingClientRect();
      const clickX = event.clientX - rect.left;
      const progressWidth = rect.width;
      
      const newTime = (clickX / progressWidth) * audioPlayer.duration;
      audioPlayer.currentTime = newTime;
      
      updateProgress();
    }

    // Function to load a track
    function loadTrack(index) {
      const song = currentPlaylist[index];
      if (!song) return;

      // Show floating player
      document.getElementById('floatingPlayer').style.display = "block";
      
      // Update song info
      document.getElementById('songTitle').textContent = song.title;
      document.getElementById('artistName').textContent = song.artist;
      document.getElementById('albumTitle').textContent = song.album || '';
      document.getElementById('coverImage').src = song.cover;
      
      // Update favorite icon
      updateFloatingFavoriteIcon(song.id);
      
      // Update background color based on cover
      updateBackgroundColorFromCover();
      // Update metadata for lock screen
      updateMediaMetadata(song);
      
      // Load audio
      audioPlayer.src = song.audioSrc;
      audioPlayer.load();
      
      // Update playlist to highlight current track
      updatePlaylistHighlight();
      
      // Update controls visibility based on whether it's an ad or not
      updateControlsVisibility();
      
      // Reset preload state
      nextTrackPreloaded = false;
    }

    // Function to play specific track
    function playAudio(id) {
      // Set current playlist based on active filters
      if (currentArtistFilter) {
        currentPlaylist = audioData.filter(song => song.artist.toLowerCase() === currentArtistFilter.toLowerCase());
      } else if (currentAlbumFilter) {
        currentPlaylist = audioData.filter(song => song.album && song.album.toLowerCase() === currentAlbumFilter.toLowerCase());
      } else {
        currentPlaylist = audioData;
      }
      
      const index = currentPlaylist.findIndex(song => song.id === id);
      if (index !== -1) {
        currentIndex = index;
        loadTrack(currentIndex);
        audioPlayer.play();
        isPlaying = true;
        document.getElementById('playPauseButton').textContent = '‚è∏';
      }
    }

    // Function to play track from favorites
    function playAudioFromFavorites(id) {
      // Set current playlist to only favorite tracks
      currentPlaylist = audioData.filter(song => favorites.includes(song.id));
      const index = currentPlaylist.findIndex(song => song.id === id);
      if (index !== -1) {
        currentIndex = index;
        loadTrack(currentIndex);
        audioPlayer.play();
        isPlaying = true;
        document.getElementById('playPauseButton').textContent = '‚è∏';
      }
    }

    // Function to play/pause
    function togglePlay() {
      if (isPlaying) {
        audioPlayer.pause();
      } else {
        audioPlayer.play();
      }
    }

    // Function for next track
    function nextTrack() {
      if (currentPlaylist.length === 0) return;
      
      if (isShuffle) {
        // If shuffle mode, select random track different from current
        currentIndex = getRandomIndexDifferentFromCurrent();
      } else {
        // If not shuffle mode, go to next track
        currentIndex = (currentIndex + 1) % currentPlaylist.length;
      }
      
      loadTrack(currentIndex);
      if (isPlaying) audioPlayer.play();
    }

    // Function for previous track
    function prevTrack() {
      if (audioPlayer.currentTime > 3) {
        audioPlayer.currentTime = 0;
      } else {
        currentIndex = (currentIndex - 1 + currentPlaylist.length) % currentPlaylist.length;
        loadTrack(currentIndex);
        if (isPlaying) audioPlayer.play();
      }
    }

    // Function to toggle shuffle mode
    function toggleShuffle() {
      isShuffle = !isShuffle;
      const shuffleButton = document.querySelector('#controls button:nth-child(4)');
      shuffleButton.style.backgroundColor = isShuffle ? '#ff5e01' : '#333';
    }

    // Function to close player
    function closePlayer() {
      audioPlayer.pause();
      document.getElementById('floatingPlayer').style.display = "none";
      isPlaying = false;
      document.getElementById('playPauseButton').textContent = '‚ñ∂';
      clearInterval(progressInterval);
    }

    // Function to minimize/restore player
    function toggleMinimize() {
      document.getElementById('floatingPlayer').classList.toggle('minimized');
    }

    // Function to show/hide playlist
    function togglePlaylist() {
      if (playlistPanel.style.display === "block") {
        playlistPanel.style.display = "none";
      } else {
        playlistPanel.style.display = "block";
        renderPlaylist();
      }
    }

    // Function to render playlist
    function renderPlaylist() {
      playlistItems.innerHTML = "";
      currentPlaylist.forEach((song, index) => {
        const playCount = playCounts[song.id] || 0;
        const item = document.createElement("div");
        item.className = `playlist-item ${index === currentIndex ? 'active' : ''}`;
        item.onclick = () => {
          currentIndex = index;
          loadTrack(currentIndex);
          audioPlayer.play();
          isPlaying = true;
          document.getElementById('playPauseButton').textContent = '‚è∏';
          playlistPanel.style.display = "none";
        };
        
        item.innerHTML = `
          <img src="${song.cover}" alt="${song.title}">
          <div class="playlist-item-info">
            <div class="playlist-item-title">${song.title}</div>
            <div class="playlist-item-artist">${song.artist}</div>
          </div>
        `;
        playlistItems.appendChild(item);
      });
    }

    // Function to update playlist highlight
    function updatePlaylistHighlight() {
      const items = document.querySelectorAll('.playlist-item');
      items.forEach((item, index) => {
        if (index === currentIndex) {
          item.classList.add('active');
        } else {
          item.classList.remove('active');
        }
      });
    }

    // Function to search playlist
    function searchPlaylist() {
      const searchTerm = document.getElementById('playlistSearchInput').value.toLowerCase();
      const items = document.querySelectorAll('.playlist-item');

      items.forEach(item => {
        const title = item.querySelector('.playlist-item-title').textContent.toLowerCase();
        const artist = item.querySelector('.playlist-item-artist').textContent.toLowerCase();
        if (title.includes(searchTerm) || artist.includes(searchTerm)) {
          item.style.display = 'flex';
        } else {
          item.style.display = 'none';
        }
      });
    }

    // Function to search songs, artists or albums
    function searchSongs() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
      
      // If search field is empty, show normal categories
      if (searchTerm === '') {
        categoriesContainer.style.display = 'block';
        searchResultsContainer.style.display = 'none';
        artistProfile.style.display = 'none';
        clearArtistFilter();
        clearAlbumFilter();
        return;
      }
      
      // Hide normal categories and show results container
      categoriesContainer.style.display = 'none';
      searchResultsContainer.style.display = 'block';
      artistProfile.style.display = 'none';
      
      // Filter songs matching search term
      const results = audioData.filter(song => {
        return (
          song.title.toLowerCase().includes(searchTerm) ||
          song.artist.toLowerCase().includes(searchTerm) ||
          (song.album && song.album.toLowerCase().includes(searchTerm))
        );
      });
      
      // Check for exact artist match
      const exactArtistMatch = audioData.find(song => song.artist.toLowerCase() === searchTerm);
      
      if (exactArtistMatch) {
        // Show artist profile instead of normal results
        showArtistProfile(exactArtistMatch.artist);
        return;
      }
      
      // Show normal results if no exact artist match
      displaySearchResults(results, searchTerm);
      
      // Check if search term matches an album exactly
      const exactAlbumMatch = audioData.find(song => song.album && song.album.toLowerCase() === searchTerm);
      
      // If exact album match, show confirmation modal
      if (exactAlbumMatch && exactAlbumMatch.album.toLowerCase() === searchTerm) {
        showConfirmationModal('album', exactAlbumMatch.album);
      }
    }

    // Function to show confirmation modal
    function showConfirmationModal(type, name) {
      if (type === 'artist') {
        confirmationTitle.textContent = '¬øDeseas escuchar solo m√∫sica de este artista?';
        confirmationMessage.textContent = `Se reproducir√°n solo las canciones de ${name}`;
      } else if (type === 'album') {
        confirmationTitle.textContent = '¬øDeseas escuchar solo m√∫sica de este √°lbum?';
        confirmationMessage.textContent = `Se reproducir√°n solo las canciones del √°lbum ${name}`;
      }
      
      filterNameSpan.textContent = name;
      pendingFilter = { type, name };
      confirmationModal.style.display = 'flex';
    }

    // Function to handle confirmation modal response
    function confirmFilter(confirm) {
      confirmationModal.style.display = 'none';
      
      if (confirm && pendingFilter) {
        if (pendingFilter.type === 'artist') {
          filterByArtist(pendingFilter.name);
        } else if (pendingFilter.type === 'album') {
          filterByAlbum(pendingFilter.name);
        }
      }
      
      pendingFilter = null;
    }

    // Function to filter by album
    function filterByAlbum(albumName) {
      currentAlbumFilter = albumName;
      currentArtistFilter = null;
      
      // Show current album name
      currentArtistDisplay.textContent = `Mostrando: ${albumName}`;
      currentArtistDisplay.style.display = 'block';
      
      // Hide all categories except "All music"
      document.querySelectorAll('.category').forEach(category => {
        if (category.id !== 'mostPlayedCategory') {
          category.style.display = 'none';
        }
      });
      
      // Filter songs in "All music" to show only album's songs
      const mostPlayedSongs = [...audioData]
        .filter(song => song.album && song.album.toLowerCase() === albumName.toLowerCase())
        .sort(() => Math.random() - 0.5);
      
      renderSongsInCategory(mostPlayedContainer, mostPlayedSongs, "plays");
    }

    // Function to clear artist filter
    function clearArtistFilter() {
      currentArtistFilter = null;
      currentArtistDisplay.style.display = 'none';
      updateArtistFilterButtons();
      updateCategoriesBasedOnPlays();
    }

    // Function to clear album filter
    function clearAlbumFilter() {
      currentAlbumFilter = null;
      currentArtistDisplay.style.display = 'none';
      updateCategoriesBasedOnPlays();
    }

    // Function to update artist filter buttons
    function updateArtistFilterButtons() {
      const buttons = document.querySelectorAll('.artist-filter-btn');
      buttons.forEach(button => {
        if (button.textContent.toLowerCase() === (currentArtistFilter || '').toLowerCase()) {
          button.classList.add('active');
        } else {
          button.classList.remove('active');
        }
      });
    }

    // Function to initialize artist filter buttons
    function initializeArtistFilters() {
      artistFilterContainer.innerHTML = '';
      
      // Get all unique artists
      const allArtists = [...new Set(audioData.map(song => song.artist))];
      
      // Create button to clear filters
      const clearButton = document.createElement('button');
      clearButton.className = `artist-filter-btn ${!currentArtistFilter ? 'active' : ''}`;
      clearButton.textContent = 'Todos';
      clearButton.onclick = () => clearArtistFilter();
      artistFilterContainer.appendChild(clearButton);
      
      // Create buttons for each artist
      allArtists.forEach(artist => {
        const button = document.createElement('button');
        button.className = `artist-filter-btn ${currentArtistFilter === artist ? 'active' : ''}`;
        button.textContent = artist;
        button.onclick = () => filterByArtist(artist);
        artistFilterContainer.appendChild(button);
      });
      
      // Show filter bar
      artistFilterContainer.style.display = 'flex';
    }

    // Function to add/remove favorites
    function toggleFavorite(id, event) {
      // Stop event propagation to prevent playAudio from triggering
      if (event) event.stopPropagation();
      
      const index = favorites.indexOf(id);
      if (index === -1) {
        favorites.push(id);
        favoriteCounts[id] = (favoriteCounts[id] || 0) + 1;
      } else {
        favorites.splice(index, 1);
        favoriteCounts[id] = Math.max((favoriteCounts[id] || 1) - 1, 0);
      }
      localStorage.setItem('favorites', JSON.stringify(favorites));
      localStorage.setItem('favoriteCounts', JSON.stringify(favoriteCounts));
      updateFavoriteButtons();
      renderFavorites();
      updateFavoriteCount(id);
    }

    // Function to update favorite buttons
    function updateFavoriteButtons() {
      const buttons = document.querySelectorAll('.favorite-btn');
      buttons.forEach(button => {
        const onclickAttr = button.getAttribute('onclick');
        if (!onclickAttr) return;
        
        const id = onclickAttr.match(/'(.*?)'/)[1];
        if (favorites.includes(id)) {
          button.classList.add('added');
          button.innerHTML = '‚ù§Ô∏è En Favoritos';
        } else {
          button.classList.remove('added');
          button.innerHTML = '‚ù§Ô∏è Favorito';
        }
      });
    }

    // Function to update favorite count
    function updateFavoriteCount(id) {
      const countElement = document.getElementById(`count-${id}`);
      if (countElement) {
        countElement.textContent = `${favoriteCounts[id] || 0} favoritos`;
      }
    }

    // Function to show/hide favorites panel
    function toggleFavoritesPanel() {
      if (favoritesPanel.style.display === "block") {
        favoritesPanel.style.display = "none";
      } else {
        favoritesPanel.style.display = "block";
        renderFavorites();
      }
    }

    // Function to render favorites
    function renderFavorites() {
      favoritesItems.innerHTML = "";
      if (favorites.length === 0) {
        favoritesItems.innerHTML = '<p style="text-align: center; color: var(--artist-name-color);">No tienes canciones favoritas a√∫n</p>';
        return;
      }

      const favoriteSongs = audioData.filter(song => favorites.includes(song.id));
      favoriteSongs.forEach((song, index) => {
        const playCount = playCounts[song.id] || 0;
        const item = document.createElement("div");
        item.className = `playlist-item ${song.id === currentPlaylist[currentIndex]?.id ? 'active' : ''}`;
        item.onclick = () => {
          // Change current playlist to only favorites
          currentPlaylist = favoriteSongs;
          currentIndex = currentPlaylist.findIndex(s => s.id === song.id);
          loadTrack(currentIndex);
          audioPlayer.play();
          isPlaying = true;
          document.getElementById('playPauseButton').textContent = '‚è∏';
          favoritesPanel.style.display = "none";
        };
        
        item.innerHTML = `
          <img src="${song.cover}" alt="${song.title}">
          <div class="playlist-item-info">
            <div class="playlist-item-title">${song.title}</div>
            <div class="playlist-item-artist">${song.artist}</div>
          </div>
        `;
        favoritesItems.appendChild(item);
      });
    }

    // Function to search favorites
    function searchFavorites() {
      const searchTerm = document.getElementById('favoritesSearchInput').value.toLowerCase();
      const items = document.querySelectorAll('#favoritesItems .playlist-item');

      items.forEach(item => {
        const title = item.querySelector('.playlist-item-title').textContent.toLowerCase();
        const artist = item.querySelector('.playlist-item-artist').textContent.toLowerCase();
        if (title.includes(searchTerm) || artist.includes(searchTerm)) {
          item.style.display = 'flex';
        } else {
          item.style.display = 'none';
        }
      });
    }

    // Function to increment play count
    function incrementPlayCount(id) {
      playCounts[id] = (playCounts[id] || 0) + 1;
      localStorage.setItem('playCounts', JSON.stringify(playCounts));
      
      // Update recent plays record
      const now = new Date();
      recentPlays.push({ id, timestamp: now.getTime() });
      // Keep only last 100 plays
      if (recentPlays.length > 100) {
        recentPlays.shift();
      }
      localStorage.setItem('recentPlays', JSON.stringify(recentPlays));
      
      // Update categories based on plays
      updateCategoriesBasedOnPlays();
    }

    // Function to update categories based on plays
    function updateCategoriesBasedOnPlays() {
      // 1. All music (random order)
      const shuffledSongs = [...audioData].sort(() => Math.random() - 0.5);
      renderSongsInCategory(mostPlayedContainer, shuffledSongs, "plays");

      // 2. Trending (based on recent plays)
      const trendingSongs = calculateTrendingSongs();
      renderSongsInCategory(trendingContainer, trendingSongs, "trending");
      
      // 3. Update followed artists section
      updateFollowedArtistsSection();
    }

    // Function to calculate trending songs
    function calculateTrendingSongs() {
      // Group plays by song in last 24 hours
      const twentyFourHoursAgo = new Date().getTime() - (24 * 60 * 60 * 1000);
      const recentPlaysLast24h = recentPlays.filter(play => play.timestamp > twentyFourHoursAgo);
      
      const playCountsLast24h = {};
      recentPlaysLast24h.forEach(play => {
        playCountsLast24h[play.id] = (playCountsLast24h[play.id] || 0) + 1;
      });
      
      // Sort by plays in last 24 hours
      const trending = [...audioData].sort((a, b) => {
        return (playCountsLast24h[b.id] || 0) - (playCountsLast24h[a.id] || 0);
      }).slice(0, 8); // Take top 8 recently played
      
      return trending;
    }

    // Function to render songs in a category
    function renderSongsInCategory(container, songs, categoryType) {
      // Clear container
      container.innerHTML = "";
      
      // Add songs
      songs.forEach((song, index) => {
        const isNew = song.releaseDate && new Date(song.releaseDate) > new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);
        const isFavorite = favorites.includes(song.id);
        
        const songItem = document.createElement("div");
        songItem.className = "song-item";
        songItem.style.animationDelay = `${index * 0.1}s`;
        songItem.innerHTML = `
          <img src="${song.cover}" alt="${song.title}" onclick="playAudio('${song.id}')">
          <div class="song-info">
            ${isNew ? '<span class="Nuevo">NUEVO</span>' : ''}
            <span class="song-title">${song.title}</span>
            <span class="artist-name">${song.artist}</span>
            ${song.album ? `<span class="album-name" style="display:block;color:#888;font-size:11px;">${song.album}</span>` : ''}
          </div>
        `;
        container.appendChild(songItem);
      });
    }

    // Function to display search results
    function displaySearchResults(results, searchTerm) {
      searchResultsGrid.innerHTML = '';
      
      if (results.length === 0) {
        noResultsMessage.style.display = 'block';
        searchResultsTitle.textContent = `No se encontraron resultados para "${searchTerm}"`;
      } else {
        noResultsMessage.style.display = 'none';
        searchResultsTitle.textContent = `Resultados para "${searchTerm}"`;
        
        results.forEach((song, index) => {
          const isNew = song.releaseDate && new Date(song.releaseDate) > new Date(Date.now() - 30 * 24 * 60 * 60 * 1000);
          const isFavorite = favorites.includes(song.id);
          
          const songItem = document.createElement("div");
          songItem.className = "song-item";
          songItem.style.animationDelay = `${index * 0.1}s`;
          songItem.innerHTML = `
            <img src="${song.cover}" alt="${song.title}" onclick="playAudio('${song.id}')">
            <div class="song-info">
              ${isNew ? '<span class="Nuevo">NUEVO</span>' : ''}
              <span class="song-title">${song.title}</span>
              <span class="artist-name">${song.artist}</span>
              ${song.album ? `<span class="album-name" style="display:block;color:#888;font-size:11px;">${song.album}</span>` : ''}
            </div>
          `;
          searchResultsGrid.appendChild(songItem);
        });
      }
    }

    // Initialization
    window.onload = function() {
      // Apply saved theme
      applyTheme();
      
      // Set up theme toggle button
      themeToggle.addEventListener('click', toggleDarkMode);
      
      // Initialize play counts if they don't exist
      if (!localStorage.getItem('playCounts')) {
        // Assign some initial play counts for demo
        const initialPlayCounts = {};
        audioData.forEach(song => {
          initialPlayCounts[song.id] = Math.floor(Math.random() * 100);
        });
        localStorage.setItem('playCounts', JSON.stringify(initialPlayCounts));
        playCounts = initialPlayCounts;
      }

      // Initialize recent plays if they don't exist
      if (!localStorage.getItem('recentPlays')) {
        // Create some recent plays for demo
        const initialRecentPlays = [];
        const now = new Date().getTime();
        audioData.forEach(song => {
          const randomHoursAgo = Math.floor(Math.random() * 24);
          initialRecentPlays.push({
            id: song.id,
            timestamp: now - (randomHoursAgo * 60 * 60 * 1000)
          });
        });
        localStorage.setItem('recentPlays', JSON.stringify(initialRecentPlays));
        recentPlays = initialRecentPlays;
      }

      // Initialize favorites if they don't exist
      if (!localStorage.getItem('favorites')) {
        localStorage.setItem('favorites', JSON.stringify([]));
        favorites = [];
      }

      // Initialize favorite counts if they don't exist
      if (!localStorage.getItem('favoriteCounts')) {
        localStorage.setItem('favoriteCounts', JSON.stringify({}));
        favoriteCounts = {};
      }
      
      // Initialize followed artists if they don't exist
      if (!localStorage.getItem('followedArtists')) {
        localStorage.setItem('followedArtists', JSON.stringify([]));
        followedArtists = [];
      }

      // Initialize artist filters
      initializeArtistFilters();

      // Update categories
      updateCategoriesBasedOnPlays();

      // Event to close playlist
      document.getElementById('closePlaylistButton').addEventListener('click', function() {
        playlistPanel.style.display = 'none';
      });
      
      // Event to close confirmation modal by clicking outside
      confirmationModal.addEventListener('click', function(e) {
        if (e.target === confirmationModal) {
          confirmationModal.style.display = 'none';
          pendingFilter = null;
        }
      });
      
      // Event to close followed artists panel
      document.getElementById('closeFollowedArtistsButton').addEventListener('click', function() {
        followedArtistsPanel.style.display = 'none';
      });
      
      // Set up video play button
      document.querySelector('.play-button').addEventListener('click', function() {
        const video = document.querySelector('.netflix-style-video');
        if (video.paused) {
            video.play();
            this.textContent = '‚è∏ Pausar';
        } else {
            video.pause();
            this.textContent = '‚ñ∂ Reproducir';
        }
      });
    };
  </script>
</body>
</html>
