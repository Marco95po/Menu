<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi culpa - Sain Nt | Reproductor Moderno</title>
    <meta name="theme-color" content="#6c5ce7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg">
    <style>
        :root {
            --primary-color: #6c5ce7;
            --secondary-color: #a29bfe;
            --dark-color: #2d3436;
            --light-color: #f5f6fa;
            --accent-color: #fd79a8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark-color), #1a1a1a);
            color: var(--light-color);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .player-container {
            width: 100%;
            max-width: 400px;
            background: rgba(45, 52, 54, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .player-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }
        
        .cover-container {
            position: relative;
            width: 100%;
            height: 300px;
            overflow: hidden;
        }
        
        .cover-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .player-container:hover .cover-image {
            transform: scale(1.05);
        }
        
        .overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
        }
        
        .song-info {
            padding: 20px;
            text-align: center;
        }
        
        .song-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 5px;
            color: white;
        }
        
        .song-artist {
            font-size: 16px;
            color: var(--secondary-color);
            margin-bottom: 3px;
        }
        
        .song-album {
            font-size: 14px;
            color: #b2bec3;
            margin-bottom: 15px;
        }
        
        .progress-container {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin: 20px 0;
            cursor: pointer;
        }
        
        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
            border-radius: 3px;
            position: relative;
            transition: width 0.1s linear;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            right: -5px;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .progress-container:hover .progress-bar::after {
            opacity: 1;
        }
        
        .time-info {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #b2bec3;
            margin-top: 5px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px 0;
        }
        
        .control-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            margin: 0 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }
        
        .control-btn.play-btn {
            background: var(--primary-color);
            width: 50px;
            height: 50px;
            font-size: 24px;
        }
        
        .control-btn.play-btn:hover {
            background: var(--secondary-color);
            transform: scale(1.1);
        }
        
        .volume-control {
            width: 100%;
            padding: 0 20px 20px;
            display: flex;
            align-items: center;
        }
        
        .volume-icon {
            margin-right: 10px;
            color: #b2bec3;
        }
        
        .volume-slider {
            flex-grow: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            -webkit-appearance: none;
            appearance: none;
            outline: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 12px;
            height: 12px;
            background: white;
            border-radius: 50%;
            cursor: pointer;
        }
        
        .category-badge {
            display: inline-block;
            background: var(--accent-color);
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 12px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="player-container">
        <div class="cover-container">
            <img src="https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg" alt="Portada del √°lbum" class="cover-image">
            <div class="overlay"></div>
        </div>
        
        <div class="song-info">
            <h1 class="song-title">Mi culpa</h1>
            <p class="song-artist">Sain Nt</p>
            <p class="song-album">Sin compromiso ‚Ä¢ 2024</p>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress"></div>
            </div>
            <div class="time-info">
                <span id="current-time">0:00</span>
                <span id="duration">3:45</span>
            </div>
            
            <div class="controls">
                <button class="control-btn" id="prev-btn">‚èÆ</button>
                <button class="control-btn" id="rewind-btn">‚è™</button>
                <button class="control-btn play-btn" id="play-btn">‚ñ∂</button>
                <button class="control-btn" id="forward-btn">‚è©</button>
                <button class="control-btn" id="next-btn">‚è≠</button>
            </div>
            
            <div class="volume-control">
                <span class="volume-icon">üîä</span>
                <input type="range" class="volume-slider" id="volume-slider" min="0" max="1" step="0.01" value="0.7">
            </div>
            
            <span class="category-badge">M√°s escuchados</span>
        </div>
    </div>

    <audio id="audio-player" src="https://www.dropbox.com/scl/fi/w32a11405ox96obylj3yw/Sain-Nt-Mi-Culpa-Video-Oficial.mp3?rlkey=kebnf2oetl34p4ayog4r75ssx&st=8vpl5v6u&raw=1" playsinline></audio>

    <script>
        // Registra el Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('ServiceWorker registrado con √©xito:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Error al registrar el ServiceWorker:', error);
                    });
            });
        }

        const audioPlayer = document.getElementById('audio-player');
        const playBtn = document.getElementById('play-btn');
        const progressBar = document.getElementById('progress');
        const progressContainer = document.querySelector('.progress-container');
        const currentTimeEl = document.getElementById('current-time');
        const durationEl = document.getElementById('duration');
        const volumeSlider = document.getElementById('volume-slider');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const rewindBtn = document.getElementById('rewind-btn');
        const forwardBtn = document.getElementById('forward-btn');
        
        // Configura la API Media Session
        function setupMediaSession() {
            if ('mediaSession' in navigator) {
                navigator.mediaSession.metadata = new MediaMetadata({
                    title: 'Mi culpa',
                    artist: 'Sain Nt',
                    album: 'Sin compromiso',
                    artwork: [
                        { src: 'https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg', sizes: '96x96', type: 'image/jpg' },
                        { src: 'https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg', sizes: '128x128', type: 'image/jpg' },
                        { src: 'https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg', sizes: '192x192', type: 'image/jpg' },
                        { src: 'https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg', sizes: '256x256', type: 'image/jpg' },
                        { src: 'https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg', sizes: '384x384', type: 'image/jpg' },
                        { src: 'https://i.postimg.cc/pTKLLfCn/Picsart-25-06-15-09-32-13-140.jpg', sizes: '512x512', type: 'image/jpg' }
                    ]
                });
                
                navigator.mediaSession.setActionHandler('play', () => {
                    audioPlayer.play();
                    playBtn.innerHTML = '‚è∏';
                });
                
                navigator.mediaSession.setActionHandler('pause', () => {
                    audioPlayer.pause();
                    playBtn.innerHTML = '‚ñ∂';
                });
                
                navigator.mediaSession.setActionHandler('seekbackward', (details) => {
                    const skipTime = details.seekOffset || 10;
                    audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - skipTime);
                });
                
                navigator.mediaSession.setActionHandler('seekforward', (details) => {
                    const skipTime = details.seekOffset || 10;
                    audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + skipTime);
                });
                
                navigator.mediaSession.setActionHandler('previoustrack', () => {
                    // L√≥gica para canci√≥n anterior
                    console.log('Canci√≥n anterior');
                });
                
                navigator.mediaSession.setActionHandler('nexttrack', () => {
                    // L√≥gica para siguiente canci√≥n
                    console.log('Siguiente canci√≥n');
                });
            }
        }
        
        // Play/Pause
        function togglePlayPause() {
            if (audioPlayer.paused) {
                audioPlayer.play();
                playBtn.innerHTML = '‚è∏';
            } else {
                audioPlayer.pause();
                playBtn.innerHTML = '‚ñ∂';
            }
        }
        
        playBtn.addEventListener('click', togglePlayPause);
        
        // Controles de navegaci√≥n
        rewindBtn.addEventListener('click', () => {
            audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 10);
        });
        
        forwardBtn.addEventListener('click', () => {
            audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 10);
        });
        
        prevBtn.addEventListener('click', () => {
            console.log('Canci√≥n anterior');
        });
        
        nextBtn.addEventListener('click', () => {
            console.log('Siguiente canci√≥n');
        });
        
        // Update progress bar
        audioPlayer.addEventListener('timeupdate', () => {
            const { currentTime, duration } = audioPlayer;
            const progressPercent = (currentTime / duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
            
            // Update time display
            currentTimeEl.textContent = formatTime(currentTime);
            if (duration) {
                durationEl.textContent = formatTime(duration);
            }
            
            // Actualiza la posici√≥n de reproducci√≥n en la API Media Session
            if ('mediaSession' in navigator) {
                navigator.mediaSession.setPositionState({
                    duration: duration,
                    playbackRate: audioPlayer.playbackRate,
                    position: currentTime
                });
            }
        });
        
        // Click on progress bar to seek
        progressContainer.addEventListener('click', (e) => {
            const width = progressContainer.clientWidth;
            const clickX = e.offsetX;
            const duration = audioPlayer.duration;
            audioPlayer.currentTime = (clickX / width) * duration;
        });
        
        // Volume control
        volumeSlider.addEventListener('input', () => {
            audioPlayer.volume = volumeSlider.value;
        });
        
        // Format time (seconds to MM:SS)
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
        }
        
        // Set initial volume
        audioPlayer.volume = volumeSlider.value;
        
        // When metadata is loaded, update duration
        audioPlayer.addEventListener('loadedmetadata', () => {
            durationEl.textContent = formatTime(audioPlayer.duration);
            setupMediaSession();
        });
        
        // Maneja el evento cuando la app est√° en segundo plano
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                console.log('La aplicaci√≥n est√° en segundo plano');
            } else {
                console.log('La aplicaci√≥n est√° en primer plano');
            }
        });
        
        // Configuraci√≥n inicial
        setupMediaSession();
    </script>
</body>
</html>
